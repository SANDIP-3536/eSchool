<!DOCTYPE html>
<html>
  <head>
    <title>Trackmee | Map</title>
    <link rel="shortcut icon" type="image/png" href="<?=base_url()?>assets/img/logo.png"/>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=650, user-scalable=yes">
     <link href="<?=base_url()?>assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="<?=base_url();?>assets/css/datepicker.css" rel="stylesheet">
    <link href="<?=base_url()?>assets/font-awesome/css/font-awesome.css" rel="stylesheet">
    <link href="<?=base_url()?>assets/css/animate.css" rel="stylesheet">
    <link href="<?=base_url()?>assets/css/style.css" rel="stylesheet">
    <link href="<?=base_url();?>assets/css/plugins/select2/select2.min.css" rel="stylesheet">
    
    <!--<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js"></script>-->
    <script src="<?=base_url()?>assets/js/jquery-2.1.1.js"></script>
    <script src="<?=base_url()?>assets/js/bootstrap.min.js"></script>
    <script src="<?=base_url();?>assets/js/jquery-ui.min.js"></script>
    <script src="<?=base_url();?>assets/js/bootstrap-datepicker.js"></script>
    <script src="<?=base_url()?>assets/js/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="<?=base_url()?>assets/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

    <!-- Custom and plugin javascript -->
    <script src="https://maps.googleapis.com/maps/api/js?key=<?=$map_key?>"></script>

    <style  type="text/css">
      html, body {
        height: 100%;
        margin: 0;      
      }

       .open>.dropdown-menu {
          display: block;
          width: max-content;
      }

      #mapcanvas {
        /*height:600px;*/
        width: 100%;
        position: absolute;
      }
  
      #info {
        width: auto;
        margin: 5px;
        height: 3%;
      }

      #directionsPanel{
          height: 80%;
        width: 70%;
      }
      #page-wrapper {
            min-height: 500px !important;
      }
      .float-e-margins .btn {
        margin-bottom: 0;
    }

    /*@percent: 1;
    @height: `Math.round( screen.height * @{percent})`;
    @width: `Math.round( screen.width * @{percent})`;
    #mapcanvas {
    position: absolute;
    top: @height;
    width: @width;
    }*/
    
    </style>
    
    <script>
     
      var map;
      
      var infowindow;     

      var lastlatLonList = [
           
          <?php for ($i=0; $i < count($res1); $i++) { ?>
            { lat: <?=$res1[$i][0]['stop_latitude']?>, lon: <?=$res1[$i][0]['stop_longitude']?>, direction: <?=$res1[$i][0]['heading_angle']?>, GPS: <?=$res1[$i][0]['gps_valid_data']?>, movement: "<?=$res1[$i][0]['vehicle_movement_status']?>" , vehicle_no: "<?=$res1[$i]['vehicle_no']?>"  , address: "<?=$res1[$i]['address']?>" },
          <?php  } ?>
      ];
console.log(lastlatLonList);
      $(document).ready(function () 
      {
        directionsDisplay = new google.maps.DirectionsRenderer
        ({
          suppressMarkers: true
        });

        var mapOptions = 
        {
          zoom: 13,
          mapTypeId: google.maps.MapTypeId.ROADMAP,
        };

        map = new google.maps.Map($('#mapcanvas')[0], mapOptions);
        var marker;
        var markerlist=[];
        var p;
        var i;
        var a;
        var marker2;
        var bounds = new google.maps.LatLngBounds();
        var test1 = 00;
        var test2 = 00;
        var lastlatLonList1=[];
        var height;
        var height1;
        var height2;
        var address_new = 0;
        infowindow = new google.maps.InfoWindow();
        

        directionsDisplay.setMap(map);
        directionsDisplay.setPanel(document.getElementById("directionsPanel"));

        var trafficLayer = new google.maps.TrafficLayer();
        trafficLayer.setMap(map);
                
       

        for (p = 0; p < lastlatLonList.length; p++) 
        {
        

          var direction = lastlatLonList[p].direction; 
          if ((lastlatLonList[p].GPS == "1" && lastlatLonList[p].movement == "B")) 
          {
            marker = new google.maps.Marker(
            {
              position: new google.maps.LatLng(lastlatLonList[p].lat, lastlatLonList[p].lon),
              map: map,
              title:' Vehicle No : '+ lastlatLonList[p].vehicle_no,
              icon : 
              {
                path: 'M55 84c1,-1 1,0 2,0 1,0 1,0 2,0l10 0c0,0 0,0 1,0 1,0 2,-1 2,0 2,2 -3,1 -5,1 -1,0 -1,0 -1,0 -1,0 -1,1 -2,1l-2 0c0,0 -1,0 -1,0 -2,0 -4,-1 -5,-1 -2,0 -1,-1 -1,-1zm9 -79l0 0c2,0 4,0 6,0 2,1 4,1 5,2 1,2 1,2 1,4 0,0 0,0 -1,0 0,-1 0,-1 0,-2 -1,-1 -3,-2 -4,-2 -2,0 -4,-1 -5,-1 -2,0 -2,0 -2,0 1,0 5,0 6,1 0,0 0,0 0,1 1,1 3,5 5,3 0,0 0,0 0,0 1,0 1,0 1,1 0,1 0,2 0,3 0,1 0,1 1,1 0,2 -1,3 -1,4 1,0 2,1 2,1 0,0 1,0 1,0 0,1 0,1 -1,1 0,0 -1,0 -1,0 -1,0 0,0 -1,-1 0,1 0,1 0,1 0,1 0,1 0,2 0,0 0,0 0,1l0 37c3,0 5,0 7,0 1,0 2,0 3,0 0,0 1,0 1,0 1,0 1,1 2,1 0,-4 -1,-8 -3,-11l-1 -1c0,-1 -1,-1 -1,-1 0,-1 0,-1 1,-1 0,-1 0,-1 0,-1 1,0 1,0 2,1 0,0 0,0 0,1 1,0 1,0 1,0l1 2c1,3 2,6 2,11 1,0 1,0 1,0 0,0 1,0 1,0l5 0c0,-3 -1,-5 -1,-7 -1,-3 -1,-5 -2,-7 -1,-2 -2,-4 -4,-6 0,-1 -1,-2 -1,-2 0,-1 1,-1 1,-2 1,0 2,2 2,2 2,2 4,5 5,8 0,1 0,2 1,3 1,3 2,7 2,11 0,0 1,0 1,0 1,0 2,0 2,0 1,0 2,0 2,0l2 0c0,-4 -1,-7 -1,-10 -1,-2 -1,-3 -2,-4 0,-2 -1,-4 -2,-4l-1 -3c-1,-1 -1,-2 -2,-3 -1,-2 -4,-6 -7,-7 0,-1 1,-1 1,-1 0,-1 1,-1 1,-2 1,1 2,2 3,3l2 3c2,2 4,5 6,8 0,1 0,2 1,2l1 2c2,6 3,10 3,16 0,0 1,0 2,0 0,0 1,0 1,0 2,0 3,0 4,0 0,-9 -3,-17 -6,-23 0,-1 -1,-2 -1,-3 -2,-2 -3,-4 -5,-7 0,0 0,0 0,-1 -1,-1 -2,-2 -3,-2l-1 -2c-1,-1 -2,-1 -3,-2 0,0 1,-2 1,-2 1,0 4,3 5,3l5 7c0,0 1,1 1,1 1,2 2,3 3,5 1,2 2,4 3,7 2,5 4,11 4,17l0 2c0,7 -2,13 -4,19 -1,3 -2,5 -4,8 -1,2 -3,4 -4,7 -1,1 -2,2 -3,3 0,0 0,0 0,0 -1,0 -1,0 -1,0 -1,-1 -1,-1 -1,-1 0,-1 1,-2 1,-2 2,-2 3,-4 4,-6l3 -5c0,-1 1,-1 1,-1 0,-1 0,-1 0,-1 1,-1 1,-2 1,-3 1,0 1,-1 1,-2 0,-1 1,-1 1,-2 1,-4 2,-9 2,-14 -2,0 -5,0 -7,0 0,4 -1,7 -1,9 -1,3 -3,8 -4,11l-1 1c-1,2 -2,4 -4,6l-2 3 -1 -1c0,0 -1,-1 -1,-1 0,0 0,0 0,0 2,-2 3,-4 4,-6 4,-6 7,-14 7,-22 -1,0 -1,0 -2,0l-5 0c0,0 0,0 0,0 0,6 -1,10 -3,14 0,1 -1,1 -1,1 0,1 -3,7 -4,7 0,0 0,0 0,0l-2 -1c0,-1 1,-2 1,-2 1,-1 2,-2 2,-3 2,-5 4,-10 4,-16 -1,0 -1,0 -2,0 0,0 -1,0 -1,0 -2,0 -2,0 -4,0 0,3 0,6 -1,8 -1,1 -1,2 -2,3 0,1 -1,2 -1,3 -1,0 -2,-2 -2,-2 0,0 1,-2 1,-2 2,-3 3,-6 3,-10 -4,0 -7,0 -11,0 -1,0 -1,0 -2,0l0 23c-1,0 -1,0 -2,0 0,0 0,0 0,1 0,2 0,2 -1,2 -3,1 -3,0 -7,1 0,0 0,0 -1,0 0,0 0,0 -1,0 0,0 0,0 0,0 3,0 6,0 9,0 0,0 1,0 1,-1l0 -3c1,0 3,0 3,1 -1,3 -2,3 -5,3 -1,1 -1,0 -2,1 -2,0 -4,0 -6,0 0,0 0,0 0,1 0,0 0,1 0,1 0,2 0,4 0,6 0,1 0,1 0,1 2,0 5,0 7,-1 2,0 3,-1 5,-2 1,1 1,1 1,2 0,1 0,1 -1,1 -4,2 -8,3 -12,3 0,2 0,3 0,4 0,3 -1,3 1,3 0,0 0,0 1,0 0,0 0,0 1,0 5,0 12,-2 17,-5 0,0 0,0 1,0 0,0 1,2 1,2 0,0 -4,2 -5,3l-2 1c-1,0 -2,0 -3,0 -3,2 -6,2 -9,2 -1,0 -1,0 -2,0 0,0 0,0 -1,0 0,0 0,0 0,0 0,1 -1,2 -1,3 0,1 0,1 0,2 0,0 0,1 0,1 9,0 16,-1 23,-4 0,0 1,-1 1,-1l4 -2c0,0 1,2 2,2l-3 2c-4,1 -7,3 -10,4 -10,3 -22,3 -32,0 -2,-1 -5,-2 -7,-3 -1,0 -2,-1 -3,-1l-3 -2c0,0 0,-1 0,-1 1,0 1,-1 1,-1 0,0 1,0 1,1 2,0 3,1 5,2 2,1 4,1 6,2 4,1 7,2 11,2l4 0c0,-2 0,-4 0,-6 -2,0 -4,0 -6,-1 -3,0 -5,-1 -8,-2 -1,0 -2,0 -2,-1 -1,0 -1,0 -2,0l-2 -1c0,0 -1,-1 -1,-1 0,0 1,-2 1,-2 2,0 3,1 5,2 3,1 6,2 9,3 2,0 4,0 6,0 0,0 0,-1 0,-2 0,0 0,-1 0,-1 0,-1 0,-1 0,-1l0 -2c0,-1 1,-1 1,-1 -4,0 -7,-1 -10,-2 -1,0 -3,-1 -4,-2 0,0 1,-1 1,-2 0,0 1,0 1,1 4,1 7,2 12,2 0,-1 0,-3 0,-5 0,0 0,0 0,-1l0 -3c-3,0 -6,0 -9,-1 -3,0 -4,0 -4,-3 -1,-1 -1,-1 0,-1 1,0 2,0 2,0 0,1 0,2 0,3 1,1 2,1 3,1l2 0c1,0 1,0 2,0 0,0 0,0 1,0 1,0 2,0 3,0 0,0 0,0 0,0 -1,0 -2,0 -3,0 -1,0 -2,-1 -3,-1 -1,0 -4,0 -5,0 0,-1 1,-2 1,-3l-3 0 0 -23c-1,0 -1,0 -2,0 0,0 -1,0 -1,0 -1,0 -3,0 -4,0 0,0 -2,0 -3,0 0,0 -1,0 -1,0 -1,0 -1,0 -2,0 0,1 0,1 0,1 0,2 0,3 0,4 1,1 1,2 1,3 0,0 0,1 0,1 1,1 2,3 2,4 0,0 -1,1 -2,1 0,0 -4,-5 -4,-12l0 -2 -6 0c0,0 0,0 0,1 0,5 0,8 2,12 1,3 2,5 3,7 0,1 0,1 0,1 0,1 -1,1 -2,2 0,-1 0,-1 -1,-1 -1,-3 -2,-6 -3,-8 -1,-4 -2,-8 -2,-13 0,0 0,-1 0,-1 -2,0 -5,0 -7,0 0,1 0,1 0,2 0,1 0,1 0,1 0,2 0,4 0,5 1,3 1,5 2,8 1,0 1,1 1,1 1,4 3,7 5,9 0,1 1,1 1,2 0,0 -1,0 -1,1 0,0 -1,0 -1,0 0,0 -1,0 -1,0 -2,-3 -4,-6 -5,-10 0,0 0,0 0,0 -1,-1 -1,-2 -1,-2 -1,-3 -2,-5 -2,-8 -1,-1 -1,-3 -1,-4l0 -3c0,0 0,-1 0,-2l-7 0c0,5 0,8 1,13 1,1 1,3 1,4 1,1 1,2 1,2 0,1 1,1 1,2 0,1 1,3 2,4 0,1 1,2 1,3 1,1 1,2 1,2l4 5c-1,0 -2,1 -3,2 0,-1 0,-2 -1,-2 -4,-7 -7,-13 -9,-22 -2,-4 -2,-8 -2,-12 0,-5 1,-10 3,-15 0,-2 1,-4 2,-6 0,-1 1,-1 1,-2 0,-1 0,-1 1,-1 0,0 0,-1 0,-1l1 -2c1,-2 2,-3 3,-4 0,-1 1,-1 1,-1 1,-2 2,-3 4,-5 0,-1 1,-2 2,-2 1,-1 2,-2 3,-3 0,0 2,-1 2,-1 1,0 1,0 1,0 0,1 1,1 1,2 -1,1 -2,1 -3,2 0,0 -1,0 -1,0l-4 4 -3 4c-1,2 -3,5 -4,6l-2 4c-2,4 -3,8 -4,13 0,1 -1,2 -1,3 0,0 0,1 0,2 0,0 0,1 0,1 1,0 1,0 2,0 1,0 1,0 2,0l2 0c1,0 1,0 1,0 0,0 0,-1 0,-1 0,-1 1,-3 1,-4 0,-3 1,-5 2,-8 1,-2 2,-4 3,-6 2,-3 4,-5 6,-7l0 -1c1,-1 3,-3 4,-3 0,-1 2,-2 3,-2 0,0 1,1 1,2 -1,0 -2,1 -2,1 -2,1 -3,3 -5,5 -1,2 -3,4 -4,6 -1,1 -1,2 -2,2 -1,2 -1,4 -2,7 -1,1 -1,3 -1,4 -1,1 -1,2 -1,3 0,1 0,2 0,2 1,0 1,1 2,1 0,0 1,0 2,0 0,0 1,0 1,0 1,0 2,0 2,0 0,-1 0,-1 0,-1 1,-3 1,-5 2,-7 1,-4 3,-8 5,-11 1,-1 3,-4 5,-5 0,1 1,2 1,3 0,0 0,0 -1,0 -1,1 -3,3 -4,5 -2,4 -4,8 -4,12 -1,1 -1,2 -1,2l0 2c2,0 4,0 6,0 1,-1 1,-1 1,-1 0,-1 0,-3 0,-4 1,0 1,-1 1,-2 1,-2 2,-3 3,-5 0,0 2,-2 3,-3 0,1 1,2 1,3 0,0 -1,0 -1,1 0,0 0,0 -1,0l-1 2c-1,2 -2,4 -2,5 0,1 -1,3 -1,4 2,0 5,0 7,0 2,0 4,0 6,0l0 -41 -2 0c0,0 -1,0 -1,-1 1,0 2,-1 3,-1l0 -8c0,-1 1,-1 1,-1 0,0 1,1 1,1 2,0 2,-1 3,-2 0,-1 1,-2 1,-3 1,0 2,0 3,-1 1,0 2,0 3,0 0,0 0,0 0,0 -1,0 -1,0 -2,0 -1,0 -2,0 -3,1 -2,0 -3,0 -4,1 -1,0 -1,0 -2,1 0,1 0,1 0,2 0,0 0,0 -1,0 0,0 0,0 0,0 0,-1 1,-3 1,-4 1,-1 3,-2 5,-2 2,0 4,0 7,0zm11 77c-1,0 -2,0 -2,-1l0 -43c0,-1 2,-1 2,0 1,0 1,3 1,4 0,1 0,4 0,5 0,3 0,34 -1,34 0,1 0,1 0,1zm-21 -18l0 7c0,1 0,1 0,2 0,1 0,2 0,3 0,1 1,6 -1,6 -1,0 -1,-1 -1,-2l0 -40c0,-1 0,-2 0,-2 0,-1 0,-1 1,-1 2,0 1,4 1,6 0,2 0,5 0,7 0,2 0,5 0,7 0,2 0,5 0,7zm19 -28c0,-3 0,-5 0,-7l0 5c0,0 0,1 0,1 0,1 0,0 0,1zm3 -2l0 0c0,0 -1,-1 0,-1 0,0 0,1 0,1zm-25 0c0,-1 0,-1 0,-1 1,0 1,0 1,1 0,0 0,0 -1,0l0 0zm0 -11l1 -1 0 0c1,1 1,8 1,10 1,1 1,3 0,3 -1,0 -1,-2 -1,-3 0,0 0,-1 0,-1 0,-1 0,-1 0,-2l-1 -6zm25 1c0,2 0,2 0,4l0 2c0,1 -1,5 -2,5 -1,0 0,-4 0,-5 0,-3 0,-2 0,-6 0,0 1,-1 1,-1 0,-1 0,-1 0,-1 0,0 0,-1 0,-1 0,0 0,0 1,0 0,1 0,1 0,1 0,1 0,1 0,2zm-24 -3l0 0c0,0 0,0 0,0zm-1 -1l1 0 0 0 -1 0 0 0zm12 -5l6 0c6,1 6,2 5,8 0,2 -1,4 -1,6l0 0c0,-1 0,-2 0,-3l-9 -1c-1,0 -2,1 -3,1 0,0 -1,0 -2,0l-4 0c0,0 0,0 -1,0l0 1c0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,-1 -1,-7 -1,-8 0,0 0,-1 0,-2 1,-1 1,-1 2,-1 3,-1 5,-1 8,-1zm-5 -8l1 0c1,-1 3,0 5,0 1,0 1,-1 3,0 1,0 2,0 2,0 0,0 -3,0 -4,0 0,0 -2,0 -2,0 -2,0 -3,0 -4,0 0,0 0,0 -1,0z',
                scale: 0.5,
                fillColor: 'green',
                fillOpacity: 1,
                rotation: direction,
                anchor: new google.maps.Point(25, 50)
              }
            });
          }
          else if ((lastlatLonList[p].GPS == "1")) 
          {
            marker = new google.maps.Marker(
            {
              position: new google.maps.LatLng(lastlatLonList[p].lat, lastlatLonList[p].lon),
              map: map,
              title:' Vehicle No : '+ lastlatLonList[p].vehicle_no,
              icon : 
              {
                path: 'M55 84c1,-1 1,0 2,0 1,0 1,0 2,0l10 0c0,0 0,0 1,0 1,0 2,-1 2,0 2,2 -3,1 -5,1 -1,0 -1,0 -1,0 -1,0 -1,1 -2,1l-2 0c0,0 -1,0 -1,0 -2,0 -4,-1 -5,-1 -2,0 -1,-1 -1,-1zm9 -79l0 0c2,0 4,0 6,0 2,1 4,1 5,2 1,2 1,2 1,4 0,0 0,0 -1,0 0,-1 0,-1 0,-2 -1,-1 -3,-2 -4,-2 -2,0 -4,-1 -5,-1 -2,0 -2,0 -2,0 1,0 5,0 6,1 0,0 0,0 0,1 1,1 3,5 5,3 0,0 0,0 0,0 1,0 1,0 1,1 0,1 0,2 0,3 0,1 0,1 1,1 0,2 -1,3 -1,4 1,0 2,1 2,1 0,0 1,0 1,0 0,1 0,1 -1,1 0,0 -1,0 -1,0 -1,0 0,0 -1,-1 0,1 0,1 0,1 0,1 0,1 0,2 0,0 0,0 0,1l0 37c3,0 5,0 7,0 1,0 2,0 3,0 0,0 1,0 1,0 1,0 1,1 2,1 0,-4 -1,-8 -3,-11l-1 -1c0,-1 -1,-1 -1,-1 0,-1 0,-1 1,-1 0,-1 0,-1 0,-1 1,0 1,0 2,1 0,0 0,0 0,1 1,0 1,0 1,0l1 2c1,3 2,6 2,11 1,0 1,0 1,0 0,0 1,0 1,0l5 0c0,-3 -1,-5 -1,-7 -1,-3 -1,-5 -2,-7 -1,-2 -2,-4 -4,-6 0,-1 -1,-2 -1,-2 0,-1 1,-1 1,-2 1,0 2,2 2,2 2,2 4,5 5,8 0,1 0,2 1,3 1,3 2,7 2,11 0,0 1,0 1,0 1,0 2,0 2,0 1,0 2,0 2,0l2 0c0,-4 -1,-7 -1,-10 -1,-2 -1,-3 -2,-4 0,-2 -1,-4 -2,-4l-1 -3c-1,-1 -1,-2 -2,-3 -1,-2 -4,-6 -7,-7 0,-1 1,-1 1,-1 0,-1 1,-1 1,-2 1,1 2,2 3,3l2 3c2,2 4,5 6,8 0,1 0,2 1,2l1 2c2,6 3,10 3,16 0,0 1,0 2,0 0,0 1,0 1,0 2,0 3,0 4,0 0,-9 -3,-17 -6,-23 0,-1 -1,-2 -1,-3 -2,-2 -3,-4 -5,-7 0,0 0,0 0,-1 -1,-1 -2,-2 -3,-2l-1 -2c-1,-1 -2,-1 -3,-2 0,0 1,-2 1,-2 1,0 4,3 5,3l5 7c0,0 1,1 1,1 1,2 2,3 3,5 1,2 2,4 3,7 2,5 4,11 4,17l0 2c0,7 -2,13 -4,19 -1,3 -2,5 -4,8 -1,2 -3,4 -4,7 -1,1 -2,2 -3,3 0,0 0,0 0,0 -1,0 -1,0 -1,0 -1,-1 -1,-1 -1,-1 0,-1 1,-2 1,-2 2,-2 3,-4 4,-6l3 -5c0,-1 1,-1 1,-1 0,-1 0,-1 0,-1 1,-1 1,-2 1,-3 1,0 1,-1 1,-2 0,-1 1,-1 1,-2 1,-4 2,-9 2,-14 -2,0 -5,0 -7,0 0,4 -1,7 -1,9 -1,3 -3,8 -4,11l-1 1c-1,2 -2,4 -4,6l-2 3 -1 -1c0,0 -1,-1 -1,-1 0,0 0,0 0,0 2,-2 3,-4 4,-6 4,-6 7,-14 7,-22 -1,0 -1,0 -2,0l-5 0c0,0 0,0 0,0 0,6 -1,10 -3,14 0,1 -1,1 -1,1 0,1 -3,7 -4,7 0,0 0,0 0,0l-2 -1c0,-1 1,-2 1,-2 1,-1 2,-2 2,-3 2,-5 4,-10 4,-16 -1,0 -1,0 -2,0 0,0 -1,0 -1,0 -2,0 -2,0 -4,0 0,3 0,6 -1,8 -1,1 -1,2 -2,3 0,1 -1,2 -1,3 -1,0 -2,-2 -2,-2 0,0 1,-2 1,-2 2,-3 3,-6 3,-10 -4,0 -7,0 -11,0 -1,0 -1,0 -2,0l0 23c-1,0 -1,0 -2,0 0,0 0,0 0,1 0,2 0,2 -1,2 -3,1 -3,0 -7,1 0,0 0,0 -1,0 0,0 0,0 -1,0 0,0 0,0 0,0 3,0 6,0 9,0 0,0 1,0 1,-1l0 -3c1,0 3,0 3,1 -1,3 -2,3 -5,3 -1,1 -1,0 -2,1 -2,0 -4,0 -6,0 0,0 0,0 0,1 0,0 0,1 0,1 0,2 0,4 0,6 0,1 0,1 0,1 2,0 5,0 7,-1 2,0 3,-1 5,-2 1,1 1,1 1,2 0,1 0,1 -1,1 -4,2 -8,3 -12,3 0,2 0,3 0,4 0,3 -1,3 1,3 0,0 0,0 1,0 0,0 0,0 1,0 5,0 12,-2 17,-5 0,0 0,0 1,0 0,0 1,2 1,2 0,0 -4,2 -5,3l-2 1c-1,0 -2,0 -3,0 -3,2 -6,2 -9,2 -1,0 -1,0 -2,0 0,0 0,0 -1,0 0,0 0,0 0,0 0,1 -1,2 -1,3 0,1 0,1 0,2 0,0 0,1 0,1 9,0 16,-1 23,-4 0,0 1,-1 1,-1l4 -2c0,0 1,2 2,2l-3 2c-4,1 -7,3 -10,4 -10,3 -22,3 -32,0 -2,-1 -5,-2 -7,-3 -1,0 -2,-1 -3,-1l-3 -2c0,0 0,-1 0,-1 1,0 1,-1 1,-1 0,0 1,0 1,1 2,0 3,1 5,2 2,1 4,1 6,2 4,1 7,2 11,2l4 0c0,-2 0,-4 0,-6 -2,0 -4,0 -6,-1 -3,0 -5,-1 -8,-2 -1,0 -2,0 -2,-1 -1,0 -1,0 -2,0l-2 -1c0,0 -1,-1 -1,-1 0,0 1,-2 1,-2 2,0 3,1 5,2 3,1 6,2 9,3 2,0 4,0 6,0 0,0 0,-1 0,-2 0,0 0,-1 0,-1 0,-1 0,-1 0,-1l0 -2c0,-1 1,-1 1,-1 -4,0 -7,-1 -10,-2 -1,0 -3,-1 -4,-2 0,0 1,-1 1,-2 0,0 1,0 1,1 4,1 7,2 12,2 0,-1 0,-3 0,-5 0,0 0,0 0,-1l0 -3c-3,0 -6,0 -9,-1 -3,0 -4,0 -4,-3 -1,-1 -1,-1 0,-1 1,0 2,0 2,0 0,1 0,2 0,3 1,1 2,1 3,1l2 0c1,0 1,0 2,0 0,0 0,0 1,0 1,0 2,0 3,0 0,0 0,0 0,0 -1,0 -2,0 -3,0 -1,0 -2,-1 -3,-1 -1,0 -4,0 -5,0 0,-1 1,-2 1,-3l-3 0 0 -23c-1,0 -1,0 -2,0 0,0 -1,0 -1,0 -1,0 -3,0 -4,0 0,0 -2,0 -3,0 0,0 -1,0 -1,0 -1,0 -1,0 -2,0 0,1 0,1 0,1 0,2 0,3 0,4 1,1 1,2 1,3 0,0 0,1 0,1 1,1 2,3 2,4 0,0 -1,1 -2,1 0,0 -4,-5 -4,-12l0 -2 -6 0c0,0 0,0 0,1 0,5 0,8 2,12 1,3 2,5 3,7 0,1 0,1 0,1 0,1 -1,1 -2,2 0,-1 0,-1 -1,-1 -1,-3 -2,-6 -3,-8 -1,-4 -2,-8 -2,-13 0,0 0,-1 0,-1 -2,0 -5,0 -7,0 0,1 0,1 0,2 0,1 0,1 0,1 0,2 0,4 0,5 1,3 1,5 2,8 1,0 1,1 1,1 1,4 3,7 5,9 0,1 1,1 1,2 0,0 -1,0 -1,1 0,0 -1,0 -1,0 0,0 -1,0 -1,0 -2,-3 -4,-6 -5,-10 0,0 0,0 0,0 -1,-1 -1,-2 -1,-2 -1,-3 -2,-5 -2,-8 -1,-1 -1,-3 -1,-4l0 -3c0,0 0,-1 0,-2l-7 0c0,5 0,8 1,13 1,1 1,3 1,4 1,1 1,2 1,2 0,1 1,1 1,2 0,1 1,3 2,4 0,1 1,2 1,3 1,1 1,2 1,2l4 5c-1,0 -2,1 -3,2 0,-1 0,-2 -1,-2 -4,-7 -7,-13 -9,-22 -2,-4 -2,-8 -2,-12 0,-5 1,-10 3,-15 0,-2 1,-4 2,-6 0,-1 1,-1 1,-2 0,-1 0,-1 1,-1 0,0 0,-1 0,-1l1 -2c1,-2 2,-3 3,-4 0,-1 1,-1 1,-1 1,-2 2,-3 4,-5 0,-1 1,-2 2,-2 1,-1 2,-2 3,-3 0,0 2,-1 2,-1 1,0 1,0 1,0 0,1 1,1 1,2 -1,1 -2,1 -3,2 0,0 -1,0 -1,0l-4 4 -3 4c-1,2 -3,5 -4,6l-2 4c-2,4 -3,8 -4,13 0,1 -1,2 -1,3 0,0 0,1 0,2 0,0 0,1 0,1 1,0 1,0 2,0 1,0 1,0 2,0l2 0c1,0 1,0 1,0 0,0 0,-1 0,-1 0,-1 1,-3 1,-4 0,-3 1,-5 2,-8 1,-2 2,-4 3,-6 2,-3 4,-5 6,-7l0 -1c1,-1 3,-3 4,-3 0,-1 2,-2 3,-2 0,0 1,1 1,2 -1,0 -2,1 -2,1 -2,1 -3,3 -5,5 -1,2 -3,4 -4,6 -1,1 -1,2 -2,2 -1,2 -1,4 -2,7 -1,1 -1,3 -1,4 -1,1 -1,2 -1,3 0,1 0,2 0,2 1,0 1,1 2,1 0,0 1,0 2,0 0,0 1,0 1,0 1,0 2,0 2,0 0,-1 0,-1 0,-1 1,-3 1,-5 2,-7 1,-4 3,-8 5,-11 1,-1 3,-4 5,-5 0,1 1,2 1,3 0,0 0,0 -1,0 -1,1 -3,3 -4,5 -2,4 -4,8 -4,12 -1,1 -1,2 -1,2l0 2c2,0 4,0 6,0 1,-1 1,-1 1,-1 0,-1 0,-3 0,-4 1,0 1,-1 1,-2 1,-2 2,-3 3,-5 0,0 2,-2 3,-3 0,1 1,2 1,3 0,0 -1,0 -1,1 0,0 0,0 -1,0l-1 2c-1,2 -2,4 -2,5 0,1 -1,3 -1,4 2,0 5,0 7,0 2,0 4,0 6,0l0 -41 -2 0c0,0 -1,0 -1,-1 1,0 2,-1 3,-1l0 -8c0,-1 1,-1 1,-1 0,0 1,1 1,1 2,0 2,-1 3,-2 0,-1 1,-2 1,-3 1,0 2,0 3,-1 1,0 2,0 3,0 0,0 0,0 0,0 -1,0 -1,0 -2,0 -1,0 -2,0 -3,1 -2,0 -3,0 -4,1 -1,0 -1,0 -2,1 0,1 0,1 0,2 0,0 0,0 -1,0 0,0 0,0 0,0 0,-1 1,-3 1,-4 1,-1 3,-2 5,-2 2,0 4,0 7,0zm11 77c-1,0 -2,0 -2,-1l0 -43c0,-1 2,-1 2,0 1,0 1,3 1,4 0,1 0,4 0,5 0,3 0,34 -1,34 0,1 0,1 0,1zm-21 -18l0 7c0,1 0,1 0,2 0,1 0,2 0,3 0,1 1,6 -1,6 -1,0 -1,-1 -1,-2l0 -40c0,-1 0,-2 0,-2 0,-1 0,-1 1,-1 2,0 1,4 1,6 0,2 0,5 0,7 0,2 0,5 0,7 0,2 0,5 0,7zm19 -28c0,-3 0,-5 0,-7l0 5c0,0 0,1 0,1 0,1 0,0 0,1zm3 -2l0 0c0,0 -1,-1 0,-1 0,0 0,1 0,1zm-25 0c0,-1 0,-1 0,-1 1,0 1,0 1,1 0,0 0,0 -1,0l0 0zm0 -11l1 -1 0 0c1,1 1,8 1,10 1,1 1,3 0,3 -1,0 -1,-2 -1,-3 0,0 0,-1 0,-1 0,-1 0,-1 0,-2l-1 -6zm25 1c0,2 0,2 0,4l0 2c0,1 -1,5 -2,5 -1,0 0,-4 0,-5 0,-3 0,-2 0,-6 0,0 1,-1 1,-1 0,-1 0,-1 0,-1 0,0 0,-1 0,-1 0,0 0,0 1,0 0,1 0,1 0,1 0,1 0,1 0,2zm-24 -3l0 0c0,0 0,0 0,0zm-1 -1l1 0 0 0 -1 0 0 0zm12 -5l6 0c6,1 6,2 5,8 0,2 -1,4 -1,6l0 0c0,-1 0,-2 0,-3l-9 -1c-1,0 -2,1 -3,1 0,0 -1,0 -2,0l-4 0c0,0 0,0 -1,0l0 1c0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,-1 -1,-7 -1,-8 0,0 0,-1 0,-2 1,-1 1,-1 2,-1 3,-1 5,-1 8,-1zm-5 -8l1 0c1,-1 3,0 5,0 1,0 1,-1 3,0 1,0 2,0 2,0 0,0 -3,0 -4,0 0,0 -2,0 -2,0 -2,0 -3,0 -4,0 0,0 0,0 -1,0z',
                scale: 0.5,
                fillColor: 'red',
                fillOpacity: 1,
                rotation: direction,
                anchor: new google.maps.Point(25, 50)
              }
            });
          }
          else if ((lastlatLonList[p].GPS == "3" && lastlatLonList[p].movement == "B")) 
          {
            marker = new google.maps.Marker(
            {
              position: new google.maps.LatLng(lastlatLonList[p].lat, lastlatLonList[p].lon),
              map: map,
              title:' Vehicle No : '+ lastlatLonList[p].vehicle_no,
              icon : 
              {
                path: 'M201 445c5,-1 6,0 12,0 4,1 6,1 10,1l55 0c2,0 3,-1 5,-1 7,0 10,-1 15,0 5,12 -19,10 -30,10 -3,0 -4,1 -7,1 -3,0 -5,0 -7,0l-14 0c-2,0 -5,0 -7,0 -7,0 -21,-1 -27,-3 -7,-2 -6,-3 -5,-8zm48 -431l1 0c11,0 25,1 36,3 10,1 22,2 27,12 3,6 5,11 5,20 -3,-1 -3,-3 -5,-3 0,-3 -2,-6 -3,-8 -5,-8 -13,-10 -22,-12 -10,-1 -18,-5 -28,-4 -10,0 -8,-2 -10,0 8,0 27,1 34,5 1,1 1,1 1,3 2,7 15,28 25,20 1,0 2,-2 2,-3 3,0 5,2 6,5 1,5 1,14 1,20 0,2 1,2 1,5 0,8 -1,15 -1,23 3,0 6,0 8,1 2,1 6,2 6,4 0,6 0,6 -6,5 -2,-1 -2,-1 -4,-1 -5,-2 -3,-2 -6,-4 0,2 2,1 2,5 0,2 0,5 0,7 0,3 0,4 0,7l0 205 0 1 0 127c-5,0 -9,0 -14,0 0,2 0,2 0,4 0,12 1,13 -2,13 -20,4 -18,3 -38,4 -3,0 -4,1 -7,0 -1,0 -4,0 -6,0 1,1 1,1 1,3 16,0 31,0 47,-3 2,0 6,0 6,-2l-1 -17c7,0 17,-2 16,4 -2,16 -11,19 -26,20 -3,0 -7,0 -10,0l-33 1 -2 0c-16,0 -33,1 -49,-1 -13,-2 -23,-3 -23,-19 -1,-5 -3,-5 4,-5 4,0 6,0 11,0 0,6 -1,12 -1,18 3,1 9,2 13,2l14 1c3,0 6,0 8,0 2,0 4,1 7,1 5,0 10,0 15,0 0,-1 0,-2 1,-3 -5,0 -10,0 -16,0 -4,0 -9,-1 -14,-1 -6,0 -23,-2 -27,-3 0,-6 1,-11 1,-18l-14 1 0 -122 0 -2 0 -225 -13 2c0,-1 -1,-4 -1,-6 6,-3 7,-4 14,-4l1 -47c0,-3 2,-4 4,-6 2,1 4,5 7,5 8,0 11,-5 15,-10 2,-3 7,-10 7,-15 6,-2 8,-3 16,-4 5,0 11,-1 18,-1 -2,-2 -2,-1 -5,-1 -2,1 -4,0 -6,1 -8,0 -13,1 -21,3 -6,2 -12,1 -19,5 -5,3 -6,4 -9,9 -4,7 0,5 -4,8 -1,1 -1,1 -2,1 0,1 -1,1 -1,1 0,-7 2,-15 5,-20 6,-10 17,-11 27,-12 12,-2 24,-3 36,-3zm60 423c-4,0 -7,-1 -7,-7l0 -232c0,-9 9,-10 12,-5 2,6 0,19 1,23 1,7 -1,22 -1,31 0,13 1,182 0,186 -1,2 -2,4 -5,4zm-112 -97l0 37c0,3 0,5 0,8 0,6 0,12 0,17 0,6 5,34 -5,34 -6,0 -7,-5 -7,-13l0 -218c0,-3 0,-8 1,-10 0,-3 2,-5 5,-5 10,0 6,23 6,32 0,13 0,26 0,39 0,13 0,25 0,39 0,13 0,26 0,40zm104 -157c0,-13 0,-25 0,-37l1 29c0,1 1,5 0,6 0,2 1,1 -1,2zm16 -7l-3 0c0,-4 0,-6 2,-7 2,1 2,6 1,7zm-136 -4c0,-1 1,-1 1,-3 3,0 3,1 3,6 0,2 -2,2 -4,2l0 -5zm2 -59l0 -7 5 0c3,7 5,44 5,54 1,6 3,18 -2,18 -6,0 -5,-9 -6,-13 0,-2 0,-6 0,-8 -1,-3 -1,-6 -1,-9l-1 -35zm133 6c0,10 -1,12 -1,22l-1 14c0,3 0,23 -6,23 -7,0 -3,-22 -3,-27 1,-18 0,-12 3,-30 0,-3 1,-6 1,-9 1,-2 1,-3 1,-4 1,-2 1,-3 3,-3 1,-2 0,-1 3,-1 0,3 -1,4 -1,7 0,3 1,4 1,8zm-131 -16l0 0c0,0 0,0 0,0zm-2 -3l2 0 0 0 -2 0 0 0zm64 -30l33 2c33,5 32,9 26,40 -1,11 -4,21 -4,33l0 0c0,-6 -1,-9 -1,-13l-51 -5c-3,0 -10,1 -13,1 -3,1 -6,0 -13,1l-20 2c-2,0 -4,0 -7,0l0 6c0,0 0,-1 0,-1 0,0 0,0 0,0 -1,-2 1,2 0,-1 -2,-4 -7,-37 -8,-40 0,-5 0,-10 3,-14 2,-3 6,-5 10,-6 14,-3 30,-5 45,-5zm-27 -42l3 -2c8,-2 19,-1 27,-1 8,0 6,-1 17,0 4,0 12,1 14,4 -4,0 -17,-2 -22,-3 -2,0 -13,0 -15,0 -7,1 -13,1 -20,1 -2,0 -2,1 -4,1z',
                scale: 0.5,
                fillColor: 'green',
                fillOpacity: 1,
                rotation: direction,
                anchor: new google.maps.Point(25, 50)
              }
            });
          }
          else  
          {
            marker = new google.maps.Marker(
            {
              position: new google.maps.LatLng(lastlatLonList[p].lat, lastlatLonList[p].lon),
              map: map,
              title:' Vehicle No : '+ lastlatLonList[p].vehicle_no,
              icon : 
              {
                path: 'M201 445c5,-1 6,0 12,0 4,1 6,1 10,1l55 0c2,0 3,-1 5,-1 7,0 10,-1 15,0 5,12 -19,10 -30,10 -3,0 -4,1 -7,1 -3,0 -5,0 -7,0l-14 0c-2,0 -5,0 -7,0 -7,0 -21,-1 -27,-3 -7,-2 -6,-3 -5,-8zm48 -431l1 0c11,0 25,1 36,3 10,1 22,2 27,12 3,6 5,11 5,20 -3,-1 -3,-3 -5,-3 0,-3 -2,-6 -3,-8 -5,-8 -13,-10 -22,-12 -10,-1 -18,-5 -28,-4 -10,0 -8,-2 -10,0 8,0 27,1 34,5 1,1 1,1 1,3 2,7 15,28 25,20 1,0 2,-2 2,-3 3,0 5,2 6,5 1,5 1,14 1,20 0,2 1,2 1,5 0,8 -1,15 -1,23 3,0 6,0 8,1 2,1 6,2 6,4 0,6 0,6 -6,5 -2,-1 -2,-1 -4,-1 -5,-2 -3,-2 -6,-4 0,2 2,1 2,5 0,2 0,5 0,7 0,3 0,4 0,7l0 205 0 1 0 127c-5,0 -9,0 -14,0 0,2 0,2 0,4 0,12 1,13 -2,13 -20,4 -18,3 -38,4 -3,0 -4,1 -7,0 -1,0 -4,0 -6,0 1,1 1,1 1,3 16,0 31,0 47,-3 2,0 6,0 6,-2l-1 -17c7,0 17,-2 16,4 -2,16 -11,19 -26,20 -3,0 -7,0 -10,0l-33 1 -2 0c-16,0 -33,1 -49,-1 -13,-2 -23,-3 -23,-19 -1,-5 -3,-5 4,-5 4,0 6,0 11,0 0,6 -1,12 -1,18 3,1 9,2 13,2l14 1c3,0 6,0 8,0 2,0 4,1 7,1 5,0 10,0 15,0 0,-1 0,-2 1,-3 -5,0 -10,0 -16,0 -4,0 -9,-1 -14,-1 -6,0 -23,-2 -27,-3 0,-6 1,-11 1,-18l-14 1 0 -122 0 -2 0 -225 -13 2c0,-1 -1,-4 -1,-6 6,-3 7,-4 14,-4l1 -47c0,-3 2,-4 4,-6 2,1 4,5 7,5 8,0 11,-5 15,-10 2,-3 7,-10 7,-15 6,-2 8,-3 16,-4 5,0 11,-1 18,-1 -2,-2 -2,-1 -5,-1 -2,1 -4,0 -6,1 -8,0 -13,1 -21,3 -6,2 -12,1 -19,5 -5,3 -6,4 -9,9 -4,7 0,5 -4,8 -1,1 -1,1 -2,1 0,1 -1,1 -1,1 0,-7 2,-15 5,-20 6,-10 17,-11 27,-12 12,-2 24,-3 36,-3zm60 423c-4,0 -7,-1 -7,-7l0 -232c0,-9 9,-10 12,-5 2,6 0,19 1,23 1,7 -1,22 -1,31 0,13 1,182 0,186 -1,2 -2,4 -5,4zm-112 -97l0 37c0,3 0,5 0,8 0,6 0,12 0,17 0,6 5,34 -5,34 -6,0 -7,-5 -7,-13l0 -218c0,-3 0,-8 1,-10 0,-3 2,-5 5,-5 10,0 6,23 6,32 0,13 0,26 0,39 0,13 0,25 0,39 0,13 0,26 0,40zm104 -157c0,-13 0,-25 0,-37l1 29c0,1 1,5 0,6 0,2 1,1 -1,2zm16 -7l-3 0c0,-4 0,-6 2,-7 2,1 2,6 1,7zm-136 -4c0,-1 1,-1 1,-3 3,0 3,1 3,6 0,2 -2,2 -4,2l0 -5zm2 -59l0 -7 5 0c3,7 5,44 5,54 1,6 3,18 -2,18 -6,0 -5,-9 -6,-13 0,-2 0,-6 0,-8 -1,-3 -1,-6 -1,-9l-1 -35zm133 6c0,10 -1,12 -1,22l-1 14c0,3 0,23 -6,23 -7,0 -3,-22 -3,-27 1,-18 0,-12 3,-30 0,-3 1,-6 1,-9 1,-2 1,-3 1,-4 1,-2 1,-3 3,-3 1,-2 0,-1 3,-1 0,3 -1,4 -1,7 0,3 1,4 1,8zm-131 -16l0 0c0,0 0,0 0,0zm-2 -3l2 0 0 0 -2 0 0 0zm64 -30l33 2c33,5 32,9 26,40 -1,11 -4,21 -4,33l0 0c0,-6 -1,-9 -1,-13l-51 -5c-3,0 -10,1 -13,1 -3,1 -6,0 -13,1l-20 2c-2,0 -4,0 -7,0l0 6c0,0 0,-1 0,-1 0,0 0,0 0,0 -1,-2 1,2 0,-1 -2,-4 -7,-37 -8,-40 0,-5 0,-10 3,-14 2,-3 6,-5 10,-6 14,-3 30,-5 45,-5zm-27 -42l3 -2c8,-2 19,-1 27,-1 8,0 6,-1 17,0 4,0 12,1 14,4 -4,0 -17,-2 -22,-3 -2,0 -13,0 -15,0 -7,1 -13,1 -20,1 -2,0 -2,1 -4,1z',
                scale: 0.1,
                fillColor: 'red',
                fillOpacity: 1,
                rotation: direction,
                anchor: new google.maps.Point(25, 50)
              }
            });
          } 

                
                 // google.maps.event.addListener(marker, 'click', (function(marker, p) {
                 //   return function() {
                 //    // infowindow.setContent(lastlatLonList[p].vehicle_no);
                 //    infowindow.setContent('<div><strong> Vehicle Number : </strong>' + lastlatLonList[p].vehicle_no + '<br>'+
                 //                          '<strong> Address : </strong>' + lastlatLonList[p].address + '<br>'+
                 //                          '</div>');
                                      
                 //    // infowindow.setOptions({maxWidth: 200});
                 //    infowindow.open(map, marker);
                 //   }
                 // }) (marker, p));


          markerlist[p]=marker;
          bounds.extend(marker.getPosition());
        }

        map.fitBounds(bounds);
        
        autoUpdate();

        // $(window).height();

        // console.log(markerlist);
                     
        function autoUpdate() 
        {
         height = $(window).height();
         height1 = $("#collapse").height();
         height4 = $(".ibox-title").height();
         height5 = $("#count").height();
         height2 = ((height - height1) - (height1*0.6)-100);
         height3 = ((height - height1) - (height1*0.6)-150 - height4- height5);
         $("#mapcanvas").height(height2);
         $("#page-wrapper").height(height);
         $("#device_table").height(height3);

          $.post('<?=site_url('Tracking/last_record')?>',{}, function(data1)
          {
              $('#vehical_status').empty();

              console.log(data1);

              lastlatLonList1=[];
              for (var i = 0; i < data1.length; i++) 
              {
                // var url = "index/data1[i][0].device_id";
                            $('#vehical_status').append('<tr class="map_details">'+
                                  '<td><label class="control-label">'+data1[i]['vehicle_no']+'</lable></td>'+ 
                                  '<td>'+data1[i][0].speed+'</td>'+ 
                                   ( data1[i][0].vehicle_movement_status == "B" ? '<td><img src="<?=base_url()?>assets/img/icon-bus-green.png" alt="running" style="height:20px;"></td>' : '<td><img src="<?=base_url()?>assets/img/icon-bus-red.png" alt="stop" style="height:20px;"></td>' )+
                                   ( data1[i][0].panic_status == "0" ? '<td><img src="<?=base_url()?>assets/img/green1.png" style="height:15px;"></td>' : '<td><img src="<?=base_url()?>assets/img/red_deep.png" style="height:15px;"></td>' )+
                                '</tr>');

                if(data1[i][0].stop_latitude != "" )
                {
                  lastlatLonList1.push({'lat':data1[i][0].stop_latitude,'lon':data1[i][0].stop_longitude,'direction':data1[i][0].heading_angle,'GPS':data1[i][0].gps_valid_data,'movement':data1[i][0].vehicle_movement_status,'vehicle_no':data1[i]['vehicle_no'],'address':lastlatLonList[i].address});
                }
                else
                {
                  lastlatLonList1[i]=lastlatLonList[i];
                }
              }
          },'json');

            height1 = $(".map_details").height();
            $(".view_map").height(height1);

          if (lastlatLonList1.length == 0 ) 
          {
            // console.log('First List is blank');
            lastlatLonList1= lastlatLonList;
          }

          // console.log('Old Latlong');
          // console.log(lastlatLonList);
          // console.log('New Latlong');
          // console.log(lastlatLonList1);

          a=0;
          for (a = 0; a < lastlatLonList.length; a++) 
          {
            var angle = lastlatLonList1[a].direction; 
            marker2=null;
            marker2=markerlist[a];
            if ((lastlatLonList1[a].GPS == "1" && lastlatLonList1[a].movement == "B")) 
            {
              marker2.setIcon(
              {
                path: 'M55 84c1,-1 1,0 2,0 1,0 1,0 2,0l10 0c0,0 0,0 1,0 1,0 2,-1 2,0 2,2 -3,1 -5,1 -1,0 -1,0 -1,0 -1,0 -1,1 -2,1l-2 0c0,0 -1,0 -1,0 -2,0 -4,-1 -5,-1 -2,0 -1,-1 -1,-1zm9 -79l0 0c2,0 4,0 6,0 2,1 4,1 5,2 1,2 1,2 1,4 0,0 0,0 -1,0 0,-1 0,-1 0,-2 -1,-1 -3,-2 -4,-2 -2,0 -4,-1 -5,-1 -2,0 -2,0 -2,0 1,0 5,0 6,1 0,0 0,0 0,1 1,1 3,5 5,3 0,0 0,0 0,0 1,0 1,0 1,1 0,1 0,2 0,3 0,1 0,1 1,1 0,2 -1,3 -1,4 1,0 2,1 2,1 0,0 1,0 1,0 0,1 0,1 -1,1 0,0 -1,0 -1,0 -1,0 0,0 -1,-1 0,1 0,1 0,1 0,1 0,1 0,2 0,0 0,0 0,1l0 37c3,0 5,0 7,0 1,0 2,0 3,0 0,0 1,0 1,0 1,0 1,1 2,1 0,-4 -1,-8 -3,-11l-1 -1c0,-1 -1,-1 -1,-1 0,-1 0,-1 1,-1 0,-1 0,-1 0,-1 1,0 1,0 2,1 0,0 0,0 0,1 1,0 1,0 1,0l1 2c1,3 2,6 2,11 1,0 1,0 1,0 0,0 1,0 1,0l5 0c0,-3 -1,-5 -1,-7 -1,-3 -1,-5 -2,-7 -1,-2 -2,-4 -4,-6 0,-1 -1,-2 -1,-2 0,-1 1,-1 1,-2 1,0 2,2 2,2 2,2 4,5 5,8 0,1 0,2 1,3 1,3 2,7 2,11 0,0 1,0 1,0 1,0 2,0 2,0 1,0 2,0 2,0l2 0c0,-4 -1,-7 -1,-10 -1,-2 -1,-3 -2,-4 0,-2 -1,-4 -2,-4l-1 -3c-1,-1 -1,-2 -2,-3 -1,-2 -4,-6 -7,-7 0,-1 1,-1 1,-1 0,-1 1,-1 1,-2 1,1 2,2 3,3l2 3c2,2 4,5 6,8 0,1 0,2 1,2l1 2c2,6 3,10 3,16 0,0 1,0 2,0 0,0 1,0 1,0 2,0 3,0 4,0 0,-9 -3,-17 -6,-23 0,-1 -1,-2 -1,-3 -2,-2 -3,-4 -5,-7 0,0 0,0 0,-1 -1,-1 -2,-2 -3,-2l-1 -2c-1,-1 -2,-1 -3,-2 0,0 1,-2 1,-2 1,0 4,3 5,3l5 7c0,0 1,1 1,1 1,2 2,3 3,5 1,2 2,4 3,7 2,5 4,11 4,17l0 2c0,7 -2,13 -4,19 -1,3 -2,5 -4,8 -1,2 -3,4 -4,7 -1,1 -2,2 -3,3 0,0 0,0 0,0 -1,0 -1,0 -1,0 -1,-1 -1,-1 -1,-1 0,-1 1,-2 1,-2 2,-2 3,-4 4,-6l3 -5c0,-1 1,-1 1,-1 0,-1 0,-1 0,-1 1,-1 1,-2 1,-3 1,0 1,-1 1,-2 0,-1 1,-1 1,-2 1,-4 2,-9 2,-14 -2,0 -5,0 -7,0 0,4 -1,7 -1,9 -1,3 -3,8 -4,11l-1 1c-1,2 -2,4 -4,6l-2 3 -1 -1c0,0 -1,-1 -1,-1 0,0 0,0 0,0 2,-2 3,-4 4,-6 4,-6 7,-14 7,-22 -1,0 -1,0 -2,0l-5 0c0,0 0,0 0,0 0,6 -1,10 -3,14 0,1 -1,1 -1,1 0,1 -3,7 -4,7 0,0 0,0 0,0l-2 -1c0,-1 1,-2 1,-2 1,-1 2,-2 2,-3 2,-5 4,-10 4,-16 -1,0 -1,0 -2,0 0,0 -1,0 -1,0 -2,0 -2,0 -4,0 0,3 0,6 -1,8 -1,1 -1,2 -2,3 0,1 -1,2 -1,3 -1,0 -2,-2 -2,-2 0,0 1,-2 1,-2 2,-3 3,-6 3,-10 -4,0 -7,0 -11,0 -1,0 -1,0 -2,0l0 23c-1,0 -1,0 -2,0 0,0 0,0 0,1 0,2 0,2 -1,2 -3,1 -3,0 -7,1 0,0 0,0 -1,0 0,0 0,0 -1,0 0,0 0,0 0,0 3,0 6,0 9,0 0,0 1,0 1,-1l0 -3c1,0 3,0 3,1 -1,3 -2,3 -5,3 -1,1 -1,0 -2,1 -2,0 -4,0 -6,0 0,0 0,0 0,1 0,0 0,1 0,1 0,2 0,4 0,6 0,1 0,1 0,1 2,0 5,0 7,-1 2,0 3,-1 5,-2 1,1 1,1 1,2 0,1 0,1 -1,1 -4,2 -8,3 -12,3 0,2 0,3 0,4 0,3 -1,3 1,3 0,0 0,0 1,0 0,0 0,0 1,0 5,0 12,-2 17,-5 0,0 0,0 1,0 0,0 1,2 1,2 0,0 -4,2 -5,3l-2 1c-1,0 -2,0 -3,0 -3,2 -6,2 -9,2 -1,0 -1,0 -2,0 0,0 0,0 -1,0 0,0 0,0 0,0 0,1 -1,2 -1,3 0,1 0,1 0,2 0,0 0,1 0,1 9,0 16,-1 23,-4 0,0 1,-1 1,-1l4 -2c0,0 1,2 2,2l-3 2c-4,1 -7,3 -10,4 -10,3 -22,3 -32,0 -2,-1 -5,-2 -7,-3 -1,0 -2,-1 -3,-1l-3 -2c0,0 0,-1 0,-1 1,0 1,-1 1,-1 0,0 1,0 1,1 2,0 3,1 5,2 2,1 4,1 6,2 4,1 7,2 11,2l4 0c0,-2 0,-4 0,-6 -2,0 -4,0 -6,-1 -3,0 -5,-1 -8,-2 -1,0 -2,0 -2,-1 -1,0 -1,0 -2,0l-2 -1c0,0 -1,-1 -1,-1 0,0 1,-2 1,-2 2,0 3,1 5,2 3,1 6,2 9,3 2,0 4,0 6,0 0,0 0,-1 0,-2 0,0 0,-1 0,-1 0,-1 0,-1 0,-1l0 -2c0,-1 1,-1 1,-1 -4,0 -7,-1 -10,-2 -1,0 -3,-1 -4,-2 0,0 1,-1 1,-2 0,0 1,0 1,1 4,1 7,2 12,2 0,-1 0,-3 0,-5 0,0 0,0 0,-1l0 -3c-3,0 -6,0 -9,-1 -3,0 -4,0 -4,-3 -1,-1 -1,-1 0,-1 1,0 2,0 2,0 0,1 0,2 0,3 1,1 2,1 3,1l2 0c1,0 1,0 2,0 0,0 0,0 1,0 1,0 2,0 3,0 0,0 0,0 0,0 -1,0 -2,0 -3,0 -1,0 -2,-1 -3,-1 -1,0 -4,0 -5,0 0,-1 1,-2 1,-3l-3 0 0 -23c-1,0 -1,0 -2,0 0,0 -1,0 -1,0 -1,0 -3,0 -4,0 0,0 -2,0 -3,0 0,0 -1,0 -1,0 -1,0 -1,0 -2,0 0,1 0,1 0,1 0,2 0,3 0,4 1,1 1,2 1,3 0,0 0,1 0,1 1,1 2,3 2,4 0,0 -1,1 -2,1 0,0 -4,-5 -4,-12l0 -2 -6 0c0,0 0,0 0,1 0,5 0,8 2,12 1,3 2,5 3,7 0,1 0,1 0,1 0,1 -1,1 -2,2 0,-1 0,-1 -1,-1 -1,-3 -2,-6 -3,-8 -1,-4 -2,-8 -2,-13 0,0 0,-1 0,-1 -2,0 -5,0 -7,0 0,1 0,1 0,2 0,1 0,1 0,1 0,2 0,4 0,5 1,3 1,5 2,8 1,0 1,1 1,1 1,4 3,7 5,9 0,1 1,1 1,2 0,0 -1,0 -1,1 0,0 -1,0 -1,0 0,0 -1,0 -1,0 -2,-3 -4,-6 -5,-10 0,0 0,0 0,0 -1,-1 -1,-2 -1,-2 -1,-3 -2,-5 -2,-8 -1,-1 -1,-3 -1,-4l0 -3c0,0 0,-1 0,-2l-7 0c0,5 0,8 1,13 1,1 1,3 1,4 1,1 1,2 1,2 0,1 1,1 1,2 0,1 1,3 2,4 0,1 1,2 1,3 1,1 1,2 1,2l4 5c-1,0 -2,1 -3,2 0,-1 0,-2 -1,-2 -4,-7 -7,-13 -9,-22 -2,-4 -2,-8 -2,-12 0,-5 1,-10 3,-15 0,-2 1,-4 2,-6 0,-1 1,-1 1,-2 0,-1 0,-1 1,-1 0,0 0,-1 0,-1l1 -2c1,-2 2,-3 3,-4 0,-1 1,-1 1,-1 1,-2 2,-3 4,-5 0,-1 1,-2 2,-2 1,-1 2,-2 3,-3 0,0 2,-1 2,-1 1,0 1,0 1,0 0,1 1,1 1,2 -1,1 -2,1 -3,2 0,0 -1,0 -1,0l-4 4 -3 4c-1,2 -3,5 -4,6l-2 4c-2,4 -3,8 -4,13 0,1 -1,2 -1,3 0,0 0,1 0,2 0,0 0,1 0,1 1,0 1,0 2,0 1,0 1,0 2,0l2 0c1,0 1,0 1,0 0,0 0,-1 0,-1 0,-1 1,-3 1,-4 0,-3 1,-5 2,-8 1,-2 2,-4 3,-6 2,-3 4,-5 6,-7l0 -1c1,-1 3,-3 4,-3 0,-1 2,-2 3,-2 0,0 1,1 1,2 -1,0 -2,1 -2,1 -2,1 -3,3 -5,5 -1,2 -3,4 -4,6 -1,1 -1,2 -2,2 -1,2 -1,4 -2,7 -1,1 -1,3 -1,4 -1,1 -1,2 -1,3 0,1 0,2 0,2 1,0 1,1 2,1 0,0 1,0 2,0 0,0 1,0 1,0 1,0 2,0 2,0 0,-1 0,-1 0,-1 1,-3 1,-5 2,-7 1,-4 3,-8 5,-11 1,-1 3,-4 5,-5 0,1 1,2 1,3 0,0 0,0 -1,0 -1,1 -3,3 -4,5 -2,4 -4,8 -4,12 -1,1 -1,2 -1,2l0 2c2,0 4,0 6,0 1,-1 1,-1 1,-1 0,-1 0,-3 0,-4 1,0 1,-1 1,-2 1,-2 2,-3 3,-5 0,0 2,-2 3,-3 0,1 1,2 1,3 0,0 -1,0 -1,1 0,0 0,0 -1,0l-1 2c-1,2 -2,4 -2,5 0,1 -1,3 -1,4 2,0 5,0 7,0 2,0 4,0 6,0l0 -41 -2 0c0,0 -1,0 -1,-1 1,0 2,-1 3,-1l0 -8c0,-1 1,-1 1,-1 0,0 1,1 1,1 2,0 2,-1 3,-2 0,-1 1,-2 1,-3 1,0 2,0 3,-1 1,0 2,0 3,0 0,0 0,0 0,0 -1,0 -1,0 -2,0 -1,0 -2,0 -3,1 -2,0 -3,0 -4,1 -1,0 -1,0 -2,1 0,1 0,1 0,2 0,0 0,0 -1,0 0,0 0,0 0,0 0,-1 1,-3 1,-4 1,-1 3,-2 5,-2 2,0 4,0 7,0zm11 77c-1,0 -2,0 -2,-1l0 -43c0,-1 2,-1 2,0 1,0 1,3 1,4 0,1 0,4 0,5 0,3 0,34 -1,34 0,1 0,1 0,1zm-21 -18l0 7c0,1 0,1 0,2 0,1 0,2 0,3 0,1 1,6 -1,6 -1,0 -1,-1 -1,-2l0 -40c0,-1 0,-2 0,-2 0,-1 0,-1 1,-1 2,0 1,4 1,6 0,2 0,5 0,7 0,2 0,5 0,7 0,2 0,5 0,7zm19 -28c0,-3 0,-5 0,-7l0 5c0,0 0,1 0,1 0,1 0,0 0,1zm3 -2l0 0c0,0 -1,-1 0,-1 0,0 0,1 0,1zm-25 0c0,-1 0,-1 0,-1 1,0 1,0 1,1 0,0 0,0 -1,0l0 0zm0 -11l1 -1 0 0c1,1 1,8 1,10 1,1 1,3 0,3 -1,0 -1,-2 -1,-3 0,0 0,-1 0,-1 0,-1 0,-1 0,-2l-1 -6zm25 1c0,2 0,2 0,4l0 2c0,1 -1,5 -2,5 -1,0 0,-4 0,-5 0,-3 0,-2 0,-6 0,0 1,-1 1,-1 0,-1 0,-1 0,-1 0,0 0,-1 0,-1 0,0 0,0 1,0 0,1 0,1 0,1 0,1 0,1 0,2zm-24 -3l0 0c0,0 0,0 0,0zm-1 -1l1 0 0 0 -1 0 0 0zm12 -5l6 0c6,1 6,2 5,8 0,2 -1,4 -1,6l0 0c0,-1 0,-2 0,-3l-9 -1c-1,0 -2,1 -3,1 0,0 -1,0 -2,0l-4 0c0,0 0,0 -1,0l0 1c0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,-1 -1,-7 -1,-8 0,0 0,-1 0,-2 1,-1 1,-1 2,-1 3,-1 5,-1 8,-1zm-5 -8l1 0c1,-1 3,0 5,0 1,0 1,-1 3,0 1,0 2,0 2,0 0,0 -3,0 -4,0 0,0 -2,0 -2,0 -2,0 -3,0 -4,0 0,0 0,0 -1,0z',
                scale: 0.5,
                fillColor: 'green',
                fillOpacity: 1,
                anchor: new google.maps.Point(25, 50)
              })   
            }
            else if ((lastlatLonList1[a].GPS == "1")) 
            {
              marker2.setIcon(
              {
                path: 'M55 84c1,-1 1,0 2,0 1,0 1,0 2,0l10 0c0,0 0,0 1,0 1,0 2,-1 2,0 2,2 -3,1 -5,1 -1,0 -1,0 -1,0 -1,0 -1,1 -2,1l-2 0c0,0 -1,0 -1,0 -2,0 -4,-1 -5,-1 -2,0 -1,-1 -1,-1zm9 -79l0 0c2,0 4,0 6,0 2,1 4,1 5,2 1,2 1,2 1,4 0,0 0,0 -1,0 0,-1 0,-1 0,-2 -1,-1 -3,-2 -4,-2 -2,0 -4,-1 -5,-1 -2,0 -2,0 -2,0 1,0 5,0 6,1 0,0 0,0 0,1 1,1 3,5 5,3 0,0 0,0 0,0 1,0 1,0 1,1 0,1 0,2 0,3 0,1 0,1 1,1 0,2 -1,3 -1,4 1,0 2,1 2,1 0,0 1,0 1,0 0,1 0,1 -1,1 0,0 -1,0 -1,0 -1,0 0,0 -1,-1 0,1 0,1 0,1 0,1 0,1 0,2 0,0 0,0 0,1l0 37c3,0 5,0 7,0 1,0 2,0 3,0 0,0 1,0 1,0 1,0 1,1 2,1 0,-4 -1,-8 -3,-11l-1 -1c0,-1 -1,-1 -1,-1 0,-1 0,-1 1,-1 0,-1 0,-1 0,-1 1,0 1,0 2,1 0,0 0,0 0,1 1,0 1,0 1,0l1 2c1,3 2,6 2,11 1,0 1,0 1,0 0,0 1,0 1,0l5 0c0,-3 -1,-5 -1,-7 -1,-3 -1,-5 -2,-7 -1,-2 -2,-4 -4,-6 0,-1 -1,-2 -1,-2 0,-1 1,-1 1,-2 1,0 2,2 2,2 2,2 4,5 5,8 0,1 0,2 1,3 1,3 2,7 2,11 0,0 1,0 1,0 1,0 2,0 2,0 1,0 2,0 2,0l2 0c0,-4 -1,-7 -1,-10 -1,-2 -1,-3 -2,-4 0,-2 -1,-4 -2,-4l-1 -3c-1,-1 -1,-2 -2,-3 -1,-2 -4,-6 -7,-7 0,-1 1,-1 1,-1 0,-1 1,-1 1,-2 1,1 2,2 3,3l2 3c2,2 4,5 6,8 0,1 0,2 1,2l1 2c2,6 3,10 3,16 0,0 1,0 2,0 0,0 1,0 1,0 2,0 3,0 4,0 0,-9 -3,-17 -6,-23 0,-1 -1,-2 -1,-3 -2,-2 -3,-4 -5,-7 0,0 0,0 0,-1 -1,-1 -2,-2 -3,-2l-1 -2c-1,-1 -2,-1 -3,-2 0,0 1,-2 1,-2 1,0 4,3 5,3l5 7c0,0 1,1 1,1 1,2 2,3 3,5 1,2 2,4 3,7 2,5 4,11 4,17l0 2c0,7 -2,13 -4,19 -1,3 -2,5 -4,8 -1,2 -3,4 -4,7 -1,1 -2,2 -3,3 0,0 0,0 0,0 -1,0 -1,0 -1,0 -1,-1 -1,-1 -1,-1 0,-1 1,-2 1,-2 2,-2 3,-4 4,-6l3 -5c0,-1 1,-1 1,-1 0,-1 0,-1 0,-1 1,-1 1,-2 1,-3 1,0 1,-1 1,-2 0,-1 1,-1 1,-2 1,-4 2,-9 2,-14 -2,0 -5,0 -7,0 0,4 -1,7 -1,9 -1,3 -3,8 -4,11l-1 1c-1,2 -2,4 -4,6l-2 3 -1 -1c0,0 -1,-1 -1,-1 0,0 0,0 0,0 2,-2 3,-4 4,-6 4,-6 7,-14 7,-22 -1,0 -1,0 -2,0l-5 0c0,0 0,0 0,0 0,6 -1,10 -3,14 0,1 -1,1 -1,1 0,1 -3,7 -4,7 0,0 0,0 0,0l-2 -1c0,-1 1,-2 1,-2 1,-1 2,-2 2,-3 2,-5 4,-10 4,-16 -1,0 -1,0 -2,0 0,0 -1,0 -1,0 -2,0 -2,0 -4,0 0,3 0,6 -1,8 -1,1 -1,2 -2,3 0,1 -1,2 -1,3 -1,0 -2,-2 -2,-2 0,0 1,-2 1,-2 2,-3 3,-6 3,-10 -4,0 -7,0 -11,0 -1,0 -1,0 -2,0l0 23c-1,0 -1,0 -2,0 0,0 0,0 0,1 0,2 0,2 -1,2 -3,1 -3,0 -7,1 0,0 0,0 -1,0 0,0 0,0 -1,0 0,0 0,0 0,0 3,0 6,0 9,0 0,0 1,0 1,-1l0 -3c1,0 3,0 3,1 -1,3 -2,3 -5,3 -1,1 -1,0 -2,1 -2,0 -4,0 -6,0 0,0 0,0 0,1 0,0 0,1 0,1 0,2 0,4 0,6 0,1 0,1 0,1 2,0 5,0 7,-1 2,0 3,-1 5,-2 1,1 1,1 1,2 0,1 0,1 -1,1 -4,2 -8,3 -12,3 0,2 0,3 0,4 0,3 -1,3 1,3 0,0 0,0 1,0 0,0 0,0 1,0 5,0 12,-2 17,-5 0,0 0,0 1,0 0,0 1,2 1,2 0,0 -4,2 -5,3l-2 1c-1,0 -2,0 -3,0 -3,2 -6,2 -9,2 -1,0 -1,0 -2,0 0,0 0,0 -1,0 0,0 0,0 0,0 0,1 -1,2 -1,3 0,1 0,1 0,2 0,0 0,1 0,1 9,0 16,-1 23,-4 0,0 1,-1 1,-1l4 -2c0,0 1,2 2,2l-3 2c-4,1 -7,3 -10,4 -10,3 -22,3 -32,0 -2,-1 -5,-2 -7,-3 -1,0 -2,-1 -3,-1l-3 -2c0,0 0,-1 0,-1 1,0 1,-1 1,-1 0,0 1,0 1,1 2,0 3,1 5,2 2,1 4,1 6,2 4,1 7,2 11,2l4 0c0,-2 0,-4 0,-6 -2,0 -4,0 -6,-1 -3,0 -5,-1 -8,-2 -1,0 -2,0 -2,-1 -1,0 -1,0 -2,0l-2 -1c0,0 -1,-1 -1,-1 0,0 1,-2 1,-2 2,0 3,1 5,2 3,1 6,2 9,3 2,0 4,0 6,0 0,0 0,-1 0,-2 0,0 0,-1 0,-1 0,-1 0,-1 0,-1l0 -2c0,-1 1,-1 1,-1 -4,0 -7,-1 -10,-2 -1,0 -3,-1 -4,-2 0,0 1,-1 1,-2 0,0 1,0 1,1 4,1 7,2 12,2 0,-1 0,-3 0,-5 0,0 0,0 0,-1l0 -3c-3,0 -6,0 -9,-1 -3,0 -4,0 -4,-3 -1,-1 -1,-1 0,-1 1,0 2,0 2,0 0,1 0,2 0,3 1,1 2,1 3,1l2 0c1,0 1,0 2,0 0,0 0,0 1,0 1,0 2,0 3,0 0,0 0,0 0,0 -1,0 -2,0 -3,0 -1,0 -2,-1 -3,-1 -1,0 -4,0 -5,0 0,-1 1,-2 1,-3l-3 0 0 -23c-1,0 -1,0 -2,0 0,0 -1,0 -1,0 -1,0 -3,0 -4,0 0,0 -2,0 -3,0 0,0 -1,0 -1,0 -1,0 -1,0 -2,0 0,1 0,1 0,1 0,2 0,3 0,4 1,1 1,2 1,3 0,0 0,1 0,1 1,1 2,3 2,4 0,0 -1,1 -2,1 0,0 -4,-5 -4,-12l0 -2 -6 0c0,0 0,0 0,1 0,5 0,8 2,12 1,3 2,5 3,7 0,1 0,1 0,1 0,1 -1,1 -2,2 0,-1 0,-1 -1,-1 -1,-3 -2,-6 -3,-8 -1,-4 -2,-8 -2,-13 0,0 0,-1 0,-1 -2,0 -5,0 -7,0 0,1 0,1 0,2 0,1 0,1 0,1 0,2 0,4 0,5 1,3 1,5 2,8 1,0 1,1 1,1 1,4 3,7 5,9 0,1 1,1 1,2 0,0 -1,0 -1,1 0,0 -1,0 -1,0 0,0 -1,0 -1,0 -2,-3 -4,-6 -5,-10 0,0 0,0 0,0 -1,-1 -1,-2 -1,-2 -1,-3 -2,-5 -2,-8 -1,-1 -1,-3 -1,-4l0 -3c0,0 0,-1 0,-2l-7 0c0,5 0,8 1,13 1,1 1,3 1,4 1,1 1,2 1,2 0,1 1,1 1,2 0,1 1,3 2,4 0,1 1,2 1,3 1,1 1,2 1,2l4 5c-1,0 -2,1 -3,2 0,-1 0,-2 -1,-2 -4,-7 -7,-13 -9,-22 -2,-4 -2,-8 -2,-12 0,-5 1,-10 3,-15 0,-2 1,-4 2,-6 0,-1 1,-1 1,-2 0,-1 0,-1 1,-1 0,0 0,-1 0,-1l1 -2c1,-2 2,-3 3,-4 0,-1 1,-1 1,-1 1,-2 2,-3 4,-5 0,-1 1,-2 2,-2 1,-1 2,-2 3,-3 0,0 2,-1 2,-1 1,0 1,0 1,0 0,1 1,1 1,2 -1,1 -2,1 -3,2 0,0 -1,0 -1,0l-4 4 -3 4c-1,2 -3,5 -4,6l-2 4c-2,4 -3,8 -4,13 0,1 -1,2 -1,3 0,0 0,1 0,2 0,0 0,1 0,1 1,0 1,0 2,0 1,0 1,0 2,0l2 0c1,0 1,0 1,0 0,0 0,-1 0,-1 0,-1 1,-3 1,-4 0,-3 1,-5 2,-8 1,-2 2,-4 3,-6 2,-3 4,-5 6,-7l0 -1c1,-1 3,-3 4,-3 0,-1 2,-2 3,-2 0,0 1,1 1,2 -1,0 -2,1 -2,1 -2,1 -3,3 -5,5 -1,2 -3,4 -4,6 -1,1 -1,2 -2,2 -1,2 -1,4 -2,7 -1,1 -1,3 -1,4 -1,1 -1,2 -1,3 0,1 0,2 0,2 1,0 1,1 2,1 0,0 1,0 2,0 0,0 1,0 1,0 1,0 2,0 2,0 0,-1 0,-1 0,-1 1,-3 1,-5 2,-7 1,-4 3,-8 5,-11 1,-1 3,-4 5,-5 0,1 1,2 1,3 0,0 0,0 -1,0 -1,1 -3,3 -4,5 -2,4 -4,8 -4,12 -1,1 -1,2 -1,2l0 2c2,0 4,0 6,0 1,-1 1,-1 1,-1 0,-1 0,-3 0,-4 1,0 1,-1 1,-2 1,-2 2,-3 3,-5 0,0 2,-2 3,-3 0,1 1,2 1,3 0,0 -1,0 -1,1 0,0 0,0 -1,0l-1 2c-1,2 -2,4 -2,5 0,1 -1,3 -1,4 2,0 5,0 7,0 2,0 4,0 6,0l0 -41 -2 0c0,0 -1,0 -1,-1 1,0 2,-1 3,-1l0 -8c0,-1 1,-1 1,-1 0,0 1,1 1,1 2,0 2,-1 3,-2 0,-1 1,-2 1,-3 1,0 2,0 3,-1 1,0 2,0 3,0 0,0 0,0 0,0 -1,0 -1,0 -2,0 -1,0 -2,0 -3,1 -2,0 -3,0 -4,1 -1,0 -1,0 -2,1 0,1 0,1 0,2 0,0 0,0 -1,0 0,0 0,0 0,0 0,-1 1,-3 1,-4 1,-1 3,-2 5,-2 2,0 4,0 7,0zm11 77c-1,0 -2,0 -2,-1l0 -43c0,-1 2,-1 2,0 1,0 1,3 1,4 0,1 0,4 0,5 0,3 0,34 -1,34 0,1 0,1 0,1zm-21 -18l0 7c0,1 0,1 0,2 0,1 0,2 0,3 0,1 1,6 -1,6 -1,0 -1,-1 -1,-2l0 -40c0,-1 0,-2 0,-2 0,-1 0,-1 1,-1 2,0 1,4 1,6 0,2 0,5 0,7 0,2 0,5 0,7 0,2 0,5 0,7zm19 -28c0,-3 0,-5 0,-7l0 5c0,0 0,1 0,1 0,1 0,0 0,1zm3 -2l0 0c0,0 -1,-1 0,-1 0,0 0,1 0,1zm-25 0c0,-1 0,-1 0,-1 1,0 1,0 1,1 0,0 0,0 -1,0l0 0zm0 -11l1 -1 0 0c1,1 1,8 1,10 1,1 1,3 0,3 -1,0 -1,-2 -1,-3 0,0 0,-1 0,-1 0,-1 0,-1 0,-2l-1 -6zm25 1c0,2 0,2 0,4l0 2c0,1 -1,5 -2,5 -1,0 0,-4 0,-5 0,-3 0,-2 0,-6 0,0 1,-1 1,-1 0,-1 0,-1 0,-1 0,0 0,-1 0,-1 0,0 0,0 1,0 0,1 0,1 0,1 0,1 0,1 0,2zm-24 -3l0 0c0,0 0,0 0,0zm-1 -1l1 0 0 0 -1 0 0 0zm12 -5l6 0c6,1 6,2 5,8 0,2 -1,4 -1,6l0 0c0,-1 0,-2 0,-3l-9 -1c-1,0 -2,1 -3,1 0,0 -1,0 -2,0l-4 0c0,0 0,0 -1,0l0 1c0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,-1 -1,-7 -1,-8 0,0 0,-1 0,-2 1,-1 1,-1 2,-1 3,-1 5,-1 8,-1zm-5 -8l1 0c1,-1 3,0 5,0 1,0 1,-1 3,0 1,0 2,0 2,0 0,0 -3,0 -4,0 0,0 -2,0 -2,0 -2,0 -3,0 -4,0 0,0 0,0 -1,0z',
                scale: 0.5,
                fillColor: 'red',
                fillOpacity: 1,
                 anchor: new google.maps.Point(25, 50)
               })   
            }
            else if ((lastlatLonList1[a].GPS == "3" && lastlatLonList1[a].movement == "B")) 
            {
              marker2.setIcon(
              {
                path: 'M201 445c5,-1 6,0 12,0 4,1 6,1 10,1l55 0c2,0 3,-1 5,-1 7,0 10,-1 15,0 5,12 -19,10 -30,10 -3,0 -4,1 -7,1 -3,0 -5,0 -7,0l-14 0c-2,0 -5,0 -7,0 -7,0 -21,-1 -27,-3 -7,-2 -6,-3 -5,-8zm48 -431l1 0c11,0 25,1 36,3 10,1 22,2 27,12 3,6 5,11 5,20 -3,-1 -3,-3 -5,-3 0,-3 -2,-6 -3,-8 -5,-8 -13,-10 -22,-12 -10,-1 -18,-5 -28,-4 -10,0 -8,-2 -10,0 8,0 27,1 34,5 1,1 1,1 1,3 2,7 15,28 25,20 1,0 2,-2 2,-3 3,0 5,2 6,5 1,5 1,14 1,20 0,2 1,2 1,5 0,8 -1,15 -1,23 3,0 6,0 8,1 2,1 6,2 6,4 0,6 0,6 -6,5 -2,-1 -2,-1 -4,-1 -5,-2 -3,-2 -6,-4 0,2 2,1 2,5 0,2 0,5 0,7 0,3 0,4 0,7l0 205 0 1 0 127c-5,0 -9,0 -14,0 0,2 0,2 0,4 0,12 1,13 -2,13 -20,4 -18,3 -38,4 -3,0 -4,1 -7,0 -1,0 -4,0 -6,0 1,1 1,1 1,3 16,0 31,0 47,-3 2,0 6,0 6,-2l-1 -17c7,0 17,-2 16,4 -2,16 -11,19 -26,20 -3,0 -7,0 -10,0l-33 1 -2 0c-16,0 -33,1 -49,-1 -13,-2 -23,-3 -23,-19 -1,-5 -3,-5 4,-5 4,0 6,0 11,0 0,6 -1,12 -1,18 3,1 9,2 13,2l14 1c3,0 6,0 8,0 2,0 4,1 7,1 5,0 10,0 15,0 0,-1 0,-2 1,-3 -5,0 -10,0 -16,0 -4,0 -9,-1 -14,-1 -6,0 -23,-2 -27,-3 0,-6 1,-11 1,-18l-14 1 0 -122 0 -2 0 -225 -13 2c0,-1 -1,-4 -1,-6 6,-3 7,-4 14,-4l1 -47c0,-3 2,-4 4,-6 2,1 4,5 7,5 8,0 11,-5 15,-10 2,-3 7,-10 7,-15 6,-2 8,-3 16,-4 5,0 11,-1 18,-1 -2,-2 -2,-1 -5,-1 -2,1 -4,0 -6,1 -8,0 -13,1 -21,3 -6,2 -12,1 -19,5 -5,3 -6,4 -9,9 -4,7 0,5 -4,8 -1,1 -1,1 -2,1 0,1 -1,1 -1,1 0,-7 2,-15 5,-20 6,-10 17,-11 27,-12 12,-2 24,-3 36,-3zm60 423c-4,0 -7,-1 -7,-7l0 -232c0,-9 9,-10 12,-5 2,6 0,19 1,23 1,7 -1,22 -1,31 0,13 1,182 0,186 -1,2 -2,4 -5,4zm-112 -97l0 37c0,3 0,5 0,8 0,6 0,12 0,17 0,6 5,34 -5,34 -6,0 -7,-5 -7,-13l0 -218c0,-3 0,-8 1,-10 0,-3 2,-5 5,-5 10,0 6,23 6,32 0,13 0,26 0,39 0,13 0,25 0,39 0,13 0,26 0,40zm104 -157c0,-13 0,-25 0,-37l1 29c0,1 1,5 0,6 0,2 1,1 -1,2zm16 -7l-3 0c0,-4 0,-6 2,-7 2,1 2,6 1,7zm-136 -4c0,-1 1,-1 1,-3 3,0 3,1 3,6 0,2 -2,2 -4,2l0 -5zm2 -59l0 -7 5 0c3,7 5,44 5,54 1,6 3,18 -2,18 -6,0 -5,-9 -6,-13 0,-2 0,-6 0,-8 -1,-3 -1,-6 -1,-9l-1 -35zm133 6c0,10 -1,12 -1,22l-1 14c0,3 0,23 -6,23 -7,0 -3,-22 -3,-27 1,-18 0,-12 3,-30 0,-3 1,-6 1,-9 1,-2 1,-3 1,-4 1,-2 1,-3 3,-3 1,-2 0,-1 3,-1 0,3 -1,4 -1,7 0,3 1,4 1,8zm-131 -16l0 0c0,0 0,0 0,0zm-2 -3l2 0 0 0 -2 0 0 0zm64 -30l33 2c33,5 32,9 26,40 -1,11 -4,21 -4,33l0 0c0,-6 -1,-9 -1,-13l-51 -5c-3,0 -10,1 -13,1 -3,1 -6,0 -13,1l-20 2c-2,0 -4,0 -7,0l0 6c0,0 0,-1 0,-1 0,0 0,0 0,0 -1,-2 1,2 0,-1 -2,-4 -7,-37 -8,-40 0,-5 0,-10 3,-14 2,-3 6,-5 10,-6 14,-3 30,-5 45,-5zm-27 -42l3 -2c8,-2 19,-1 27,-1 8,0 6,-1 17,0 4,0 12,1 14,4 -4,0 -17,-2 -22,-3 -2,0 -13,0 -15,0 -7,1 -13,1 -20,1 -2,0 -2,1 -4,1z',
                scale: 0.5,
                fillColor: 'green',
                fillOpacity: 1,
                anchor: new google.maps.Point(25, 50)
              })   
            }
            else  
            {
              marker2.setIcon(
              {
                path: 'M201 445c5,-1 6,0 12,0 4,1 6,1 10,1l55 0c2,0 3,-1 5,-1 7,0 10,-1 15,0 5,12 -19,10 -30,10 -3,0 -4,1 -7,1 -3,0 -5,0 -7,0l-14 0c-2,0 -5,0 -7,0 -7,0 -21,-1 -27,-3 -7,-2 -6,-3 -5,-8zm48 -431l1 0c11,0 25,1 36,3 10,1 22,2 27,12 3,6 5,11 5,20 -3,-1 -3,-3 -5,-3 0,-3 -2,-6 -3,-8 -5,-8 -13,-10 -22,-12 -10,-1 -18,-5 -28,-4 -10,0 -8,-2 -10,0 8,0 27,1 34,5 1,1 1,1 1,3 2,7 15,28 25,20 1,0 2,-2 2,-3 3,0 5,2 6,5 1,5 1,14 1,20 0,2 1,2 1,5 0,8 -1,15 -1,23 3,0 6,0 8,1 2,1 6,2 6,4 0,6 0,6 -6,5 -2,-1 -2,-1 -4,-1 -5,-2 -3,-2 -6,-4 0,2 2,1 2,5 0,2 0,5 0,7 0,3 0,4 0,7l0 205 0 1 0 127c-5,0 -9,0 -14,0 0,2 0,2 0,4 0,12 1,13 -2,13 -20,4 -18,3 -38,4 -3,0 -4,1 -7,0 -1,0 -4,0 -6,0 1,1 1,1 1,3 16,0 31,0 47,-3 2,0 6,0 6,-2l-1 -17c7,0 17,-2 16,4 -2,16 -11,19 -26,20 -3,0 -7,0 -10,0l-33 1 -2 0c-16,0 -33,1 -49,-1 -13,-2 -23,-3 -23,-19 -1,-5 -3,-5 4,-5 4,0 6,0 11,0 0,6 -1,12 -1,18 3,1 9,2 13,2l14 1c3,0 6,0 8,0 2,0 4,1 7,1 5,0 10,0 15,0 0,-1 0,-2 1,-3 -5,0 -10,0 -16,0 -4,0 -9,-1 -14,-1 -6,0 -23,-2 -27,-3 0,-6 1,-11 1,-18l-14 1 0 -122 0 -2 0 -225 -13 2c0,-1 -1,-4 -1,-6 6,-3 7,-4 14,-4l1 -47c0,-3 2,-4 4,-6 2,1 4,5 7,5 8,0 11,-5 15,-10 2,-3 7,-10 7,-15 6,-2 8,-3 16,-4 5,0 11,-1 18,-1 -2,-2 -2,-1 -5,-1 -2,1 -4,0 -6,1 -8,0 -13,1 -21,3 -6,2 -12,1 -19,5 -5,3 -6,4 -9,9 -4,7 0,5 -4,8 -1,1 -1,1 -2,1 0,1 -1,1 -1,1 0,-7 2,-15 5,-20 6,-10 17,-11 27,-12 12,-2 24,-3 36,-3zm60 423c-4,0 -7,-1 -7,-7l0 -232c0,-9 9,-10 12,-5 2,6 0,19 1,23 1,7 -1,22 -1,31 0,13 1,182 0,186 -1,2 -2,4 -5,4zm-112 -97l0 37c0,3 0,5 0,8 0,6 0,12 0,17 0,6 5,34 -5,34 -6,0 -7,-5 -7,-13l0 -218c0,-3 0,-8 1,-10 0,-3 2,-5 5,-5 10,0 6,23 6,32 0,13 0,26 0,39 0,13 0,25 0,39 0,13 0,26 0,40zm104 -157c0,-13 0,-25 0,-37l1 29c0,1 1,5 0,6 0,2 1,1 -1,2zm16 -7l-3 0c0,-4 0,-6 2,-7 2,1 2,6 1,7zm-136 -4c0,-1 1,-1 1,-3 3,0 3,1 3,6 0,2 -2,2 -4,2l0 -5zm2 -59l0 -7 5 0c3,7 5,44 5,54 1,6 3,18 -2,18 -6,0 -5,-9 -6,-13 0,-2 0,-6 0,-8 -1,-3 -1,-6 -1,-9l-1 -35zm133 6c0,10 -1,12 -1,22l-1 14c0,3 0,23 -6,23 -7,0 -3,-22 -3,-27 1,-18 0,-12 3,-30 0,-3 1,-6 1,-9 1,-2 1,-3 1,-4 1,-2 1,-3 3,-3 1,-2 0,-1 3,-1 0,3 -1,4 -1,7 0,3 1,4 1,8zm-131 -16l0 0c0,0 0,0 0,0zm-2 -3l2 0 0 0 -2 0 0 0zm64 -30l33 2c33,5 32,9 26,40 -1,11 -4,21 -4,33l0 0c0,-6 -1,-9 -1,-13l-51 -5c-3,0 -10,1 -13,1 -3,1 -6,0 -13,1l-20 2c-2,0 -4,0 -7,0l0 6c0,0 0,-1 0,-1 0,0 0,0 0,0 -1,-2 1,2 0,-1 -2,-4 -7,-37 -8,-40 0,-5 0,-10 3,-14 2,-3 6,-5 10,-6 14,-3 30,-5 45,-5zm-27 -42l3 -2c8,-2 19,-1 27,-1 8,0 6,-1 17,0 4,0 12,1 14,4 -4,0 -17,-2 -22,-3 -2,0 -13,0 -15,0 -7,1 -13,1 -20,1 -2,0 -2,1 -4,1z',
                scale: 0.1,
                fillColor: 'red',
                fillOpacity: 1,
                anchor: new google.maps.Point(25, 50)
              })   
            }
            
            // var latlng1 = new google.maps.LatLng(lastlatLonList[a].lat, lastlatLonList[a].lon); 
            // marker2.setPosition(latlng1);
            marker2.icon.rotation = angle;
            marker.setTitle(' Vehicle No : '+lastlatLonList1[a].vehicle_no);

            if (address_new == 0) {
             address_new = lastlatLonList[a].address ;
            }

            if ((lastlatLonList[a].lat != lastlatLonList1[a].lat && lastlatLonList[a].lon != lastlatLonList1[a].lon))
            {
              var j=0;
              var check=0;
              var old_lat=0;
              var old_lon=0;
              var deltaLat=0;
              var deltaLng=0;
              // old_lat = lastlatLonList[a].lat;
              // old_lon = lastlatLonList[a].lon;
              // deltaLat = (lastlatLonList1[a].lat - old_lat)/100;
              // deltaLng = (lastlatLonList1[a].lon - old_lon)/100;
              
              // for (j = 0; j<= 100; j++)
              // { 
              //   // alert(j);
              // // alert(old_lat);
              //   old_lat = +old_lat + +deltaLat;
              //   old_lon = +old_lon + +deltaLng;
              //   var latlng = 0;
              //   var latlng = new google.maps.LatLng(old_lat, old_lon); 
              //   // console.log(j+' : '+old_lat+' : '+old_lon);
              //    marker2.setPosition(latlng);
              // }

                var latlng = new google.maps.LatLng(lastlatLonList1[a].lat, lastlatLonList1[a].lon); 
                 marker2.setPosition(latlng);


              // $.post('<?=site_url('tracking/address')?>',{lat : lastlatLonList1[a].lat, lon : lastlatLonList1[a].lon}, function(data){
              //           console.log(data.address);
              //            address_new = data.address;
              //            // lastlatLonList[a].push({'address':data.address});
              //    },'json');

               
            }
            
                 // google.maps.event.addListener(marker, 'click', (function(marker, a) {
                 //    return function() {
                     
                 //      infowindow.setContent('<div><strong> Vehicle Number: </strong>' + lastlatLonList[a].vehicle_no + '<br>'+
                 //                            '<strong> Address: </strong>' + address_new + '<br>'+
                 //                            '</div>');
                                        
                 //      // infowindow.setOptions({maxWidth: 200});
                 //      infowindow.open(map, marker);
                 //    }
                 //  }) (marker, a));

            
            marker2.setMap(map);
            markerlist[a]=marker2; 

              

          }

          lastlatLonList =[];
          lastlatLonList = lastlatLonList1;
          setTimeout(autoUpdate, 3000);
        }  


         <?php if($map = 'map') {?>
            $('#tracking').addClass('active');
        <?php } ?>
        
      });//end document ready
    </script>
  </head>

  <body  class="top-navigation">

     <div id="wrapper">
        <div id="page-wrapper" class="gray-bg" style="min-height: 850px;background: white;padding: 0;">
        <div class="row border-bottom white-bg">
        <nav class="navbar navbar-static-top" role="navigation">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                            <span class="icon-bar" style="background-color: black;"></span>
                            <span class="icon-bar" style="background-color: black;"></span>
                            <span class="icon-bar" style="background-color: black;"></span> 
                        </button>
                        <img class="img-responsive" src="<?=base_url()?>assets/img/Trackmee_logo.png" style="height:74px;"></a>
                    </div>
                    <div class="navbar-collapse collapse" id="myNavbar">
                        <ul class="nav navbar-nav">
                        <?php if($direct == 0){ ?>
                            <li>
                                <a href="<?=site_url('Authentication/direct_logout')?>"><img src="<?=base_url()?>assets/img/icon/school.png" style="display: -webkit-box;font-size: initial;padding-left: 12px;"></i> School</a>
                            </li>
                        <?php }?>
                            <li id="dashboard">
                               <a href="<?=site_url('School')?>"><img src="<?=base_url()?>assets/img/icon/dashboard.png" style="display: -webkit-box;font-size: initial;padding-left: 20px;"></i> Dashboard </a>
                            </li>
                            <li id="employee">
                                <a href="<?=site_url('Employee/view_employee')?>"> <img src="<?=base_url()?>assets/img/icon/employee.png" style="display: -webkit-box;font-size: initial;padding-left: 12px;"></i> <b>Employee</b></a>
                            </li>
                            <li id="student">
                                <a href="<?=site_url('Student/view_student')?>"> <img src="<?=base_url()?>assets/img/icon/student.png" style="display: -webkit-box;font-size: initial;padding-left: 12px;"></i> <b>Student</b></a>
                            </li>
                        <?php if($functionality[0]['school_tracking'] == 1) {?>
                            <li class="dropdown" id="transport">
                                <a aria-expanded="false" role="button" href="#" class="dropdown-toggle" data-toggle="dropdown"><img src="<?=base_url()?>assets/img/icon/transport.png" style="display: -webkit-box;font-size: initial;padding-left: 25px;"></i> Transport <span class="caret"></span></a>
                                <ul role="menu" class="dropdown-menu">
                                    <!-- <li><a href="<?=site_url('Driver/view_driver')?>"><img src="<?=base_url()?>assets/img/icon/driver.png" style="display: inline;font-size: initial;"></i> <b>Driver</b></a></li> -->
                                    <li><a href="<?=site_url('Bus/view_school_bus')?>"><img src="<?=base_url()?>assets/img/icon/bus.png" style="display: inline;font-size: initial;"></i> <b>Bus</b></a></li>
                                    <li><a href="<?=site_url('Route/route_registration')?>"><i class="fa fa-road" style="display: inline;font-size: initial;"></i> <b>Route</b></a></li>
                                    <li><a href="<?=site_url('Stop/stop_registration')?>"><img src="<?=base_url()?>assets/img/icon/stop.png" style="display: inline;font-size: initial;"></i> <b>Stop</b></a></li>
                                    <li><a href="<?=site_url('Driver_bus_route_assgn/driver_bus_route_assign')?>"><i class="fa fa-check-square-o" style="display: inline;font-size: initial; color:#67C6F1;"></i> <b>Driver Bus Route Assign</b></a></li>
                                    <li><a href="<?=site_url('Student_stop_assign/student_stop_assignment')?>"><i class="fa fa-check-square-o" style="display: inline;font-size: initial;color:#67C6F1;"></i> <b>Student Stop Assign</b></a></li>
                                </ul>
                            </li>
                            <li id="tracking">
                                <a href="<?=site_url('Tracking/view_map_table')?>"><img src="<?=base_url()?>assets/img/icon/tracking.png" style="display: -webkit-box;font-size: initial;padding-left: 15px;"></i> Tracking </a>
                            </li>
                            <li class="dropdown" id="report">
                                <a aria-expanded="false" role="button" href="#" class="dropdown-toggle" data-toggle="dropdown"><img src="<?=base_url()?>assets/img/icon/report.png" style="display: -webkit-box;font-size: initial;padding-left: 15px;"></i> Reports <span class="caret"></span></a>
                                <ul role="menu" class="dropdown-menu">
                                    <!-- <li><a href="<?=site_url('Reports/location_report')?>"><i class="fa fa-location-arrow" style="display: inline;font-size: initial;"></i> <b> Location Report</b></a></li> -->
                                    <li><a href="<?=site_url('Reports/distance_report')?>"><i class="fa fa-bar-chart" style="display: inline;font-size: initial;"></i> <b> Distance Report</b></a></li>
                                    <li><a href="<?=site_url('Reports/stoppage_report')?>"><i class="fa fa-stop" style="display: inline;font-size: initial;"></i> <b> Stoppage Report</b></a></li>
                                    <li><a href="<?=site_url('Reports/overspeed_report')?>"><i class="fa fa-stack-overflow" style="display: inline;font-size: initial;"></i> <b> Overspeed Report</b></a></li>
                                    <li><a href="<?=site_url('Reports/history_report')?>"><i class="fa fa-history" style="display: inline;font-size: initial;"></i> <b> History Report</b></a></li>
                                    <!-- <li><a href="<?=site_url('Reports/summarised_report')?>"><i class="fa fa-bar-chart" style="display: inline;font-size: initial;"></i> <b> Summarised Report</b></a></li> -->
                                </ul>
                            </li>
                        <?php } ?>
                            <li id="gallery">
                                <a href="<?=site_url('Gallery')?>"><img src="<?=base_url()?>assets/img/icon/gallery.png" style="display: -webkit-box;font-size: initial;padding-left: 10px;"></i> Gallery </a>
                            </li>
                        <?php if($functionality[0]['school_CRM'] == 1) {?>
                            <li class="dropdown" id="education">
                                <a aria-expanded="false" role="button" href="#" class="dropdown-toggle" data-toggle="dropdown"><img src="<?=base_url()?>assets/img/icon/education1.png" style="display: -webkit-box;font-size: initial;padding-left: 25px;"></i> Educational <span class="caret"></span></a>
                                <ul role="menu" class="dropdown-menu">
                                    <!-- <li><a href="<?=site_url('Teacher/view_teacher')?>"><img src="<?=base_url()?>assets/img/icon/teacher.png" style="display: inline;font-size: initial;"></i> <b>Teacher</b></a></li> -->
                                    <li><a href="<?=site_url('School_class/class_details')?>"><img src="<?=base_url()?>assets/img/icon/class.png" style="display: inline;font-size: initial;"></i> <b>Class</b></a></li>
                                    <li><a href="<?=site_url('Division/division_details')?>"><img src="<?=base_url()?>assets/img/icon/class.png" style="display: inline;font-size: initial;"></i> <b>Division</b></a></li>
                                    <li><a href="<?=site_url('Subject/subject_details')?>"><img src="<?=base_url()?>assets/img/icon/subject.png" style="display: inline;font-size: initial;"></i> <b>Subject</b></a></li>
                                    <li><a href="<?=site_url('Timetable')?>"><i class="fa fa-check-square-o" style="display: inline;font-size: initial;"></i> <b>Timetables</b></a></li>
                                    <!-- <li><a href="<?=site_url('Homework/homework_details')?>"><img src="<?=base_url()?>assets/img/icon/homework.png" style="display: inline;font-size: initial;"></i> <b>Homework</b></a></li>
                                    <li><a href="<?=site_url('Exam/exam_details')?>"><img src="<?=base_url()?>assets/img/icon/exam.png" style="display: inline;font-size: initial;"></i> <b> Exam </b></a></li>
                                    <li><a href="<?=site_url('Result/result_details')?>"><img src="<?=base_url()?>assets/img/icon/result.png" style="display: inline;font-size: initial;"></i> <b> Result </b></a></li>
                                    <li><a href="<?=site_url('Attendance/attend_details')?>"><i class="fa fa-graduation-cap" style="display: inline;font-size: initial;"></i> <b>Attendance</b></a></li> -->
                                    <li><a href="<?=site_url('Student_class_division_assign')?>"><i class="fa fa-check-square-o" style="display: inline;font-size: initial;color:#67C6F1;"></i> <b>Student Class Division</b></a></li>
                                    <li><a href="<?=site_url('Teacher_class_division_subject_assign')?>"><i class="fa fa-check-square-o" style="display: inline;font-size: initial;color:#67C6F1;"></i> <b>Teacher Class Division Subject Assign</b></a></li>
                                    <li><a href="<?=site_url('Teacher_subject_assign')?>"><i class="fa fa-check-square-o" style="display: inline;font-size: initial;color:#67C6F1;"></i> <b>Teacher Subject Assign</b></a></li>
                                </ul>
                            </li>
                            <li class="dropdown" id="notification">
                                <a aria-expanded="false" role="button" href="#" class="dropdown-toggle" data-toggle="dropdown"><img src="<?=base_url()?>assets/img/icon/notification.png" style="display: -webkit-box;font-size: initial;padding-left: 30px;"></i> Notification <span class="caret"></span></a>
                                <ul role="menu" class="dropdown-menu">
                                    <li><a href="<?=site_url('Notification/parent_meeting')?>"><img src="<?=base_url()?>assets/img/icon/parent1.png" style="display: inline;font-size: initial;"></i> <b> Parent Meeting</b></a></li>
                                    <li><a href="<?=site_url('Notification/event_notification')?>"><img src="<?=base_url()?>assets/img/icon/event.png" style="display: inline;font-size: initial;"></i> <b> Event Notification</b></a></li>
                                    <li><a href="<?=site_url('Notification/other_notification')?>"><img src="<?=base_url()?>assets/img/icon/other.png" style="display: inline;font-size: initial;"></i> <b> Other Notification</b></a></li>
                                    <li><a href="<?=site_url('Notification/student_teacher')?>"><img src="<?=base_url()?>assets/img/icon/stu_notification.png" style="display: inline;font-size: initial;"></i> <b> Student Notification</b></a></li>
                                    <li><a href="<?=site_url('Notification/emergency')?>"><img src="<?=base_url()?>assets/img/icon/emergency.png" style="display: inline;font-size: initial;"></i> <b> Emergency Notification</b></a></li>
                                </ul>
                            </li>
                        <?php } ?>
                            <li class="dropdown" id="fee">
                                <a aria-expanded="false" role="button" href="#" class="dropdown-toggle" data-toggle="dropdown"><img src="<?=base_url()?>assets/img/icon/money.png" style="display: -webkit-box;font-size: initial;padding-left: 10px;"></i> Fee's <span class="caret"></span></a>
                                <ul role="menu" class="dropdown-menu">
                                    <!-- <li><a href="<?=site_url('Fee/fee_category')?>"><img src="<?=base_url()?>assets/img/icon/parent1.png" style="display: inline;font-size: initial;"></i> <b> Fee Category</b></a></li> -->
                                    <li><a href="<?=site_url('Fee/fee_types')?>"><img src="<?=base_url()?>assets/img/icon/parent1.png" style="display: inline;font-size: initial;"></i> <b> Fee Type's</b></a></li>
                                    <!-- <li><a href="<?=site_url('Fee/fee_waiver')?>"><img src="<?=base_url()?>assets/img/icon/parent1.png" style="display: inline;font-size: initial;"></i> <b> Fee Waiver</b></a></li> -->
                                    <li><a href="<?=site_url('Fee/fee_details')?>"><img src="<?=base_url()?>assets/img/icon/event.png" style="display: inline;font-size: initial;"></i> <b> Fee Details</b></a></li>
                                </ul>
                            </li>
                            <li id="holiday">
                                <a href="<?=site_url('Holiday/holidays')?>"><img src="<?=base_url()?>assets/img/icon/holiday.png" style="display: -webkit-box;font-size: initial;padding-left: 15px;"></i> Holiday</a>
                            </li>
                     </ul>
                     <ul class="nav navbar-top-links navbar-right">
                       <div class="dropdown profile-element">
                        <center>
                            <?php if($direct != 0){ ?>
                            <a data-toggle="dropdown" class="dropdown-toggle" href="#" aria-expanded="false" style="padding: 0px 0px;">
                                <span class="clear">
                                    <img alt="image" class="img-circle" src="<?php echo $photo ?>" style="height:61px;width:61px;padding: 10px;"></span> 
                                </span>
                            </a>
                            <div class="dropdown-menu fadeInLeft" style="">
                                <div class="contact-box" style="margin: 0 0 0 0;">
                                    <div class="row">
                                        <div class="col-sm-4">
                                            <img alt="image" class="img-circle img-responsive"  src="<?php echo $photo ?>" style="height:81px;width:81px;">
                                        </div>
                                        <div class="col-sm-8" style="padding:0%;">
                                            <h3><strong><?php echo $first_name." ".$last_name; ?></strong></h3>
                                            <h4><?php echo $email_id; ?></h4>
                                            <h5><span>Username: </span><?php echo $username; ?></h5>
                                            <?php if($direct != 0){ ?><a href="<?=site_url('School/edit_profile')?>">My Account</a> <?php } ?>
                                        </div>       
                                    </div>

                                </div>
                                
                                <div style="background-color:#000000;">
                                    <div style="padding:3%;">
                                        <a href="<?=site_url('School/forgot_password')?>" style="color:#ffffff;">Change Password?</a>
                                        <a href="<?=site_url('Authentication/logout')?>" class="btn btn-xs btn-primary pull-right" style:"color:#000000; padding-bottom:2%;">Logout</a>
                                    </div>
                                </div>
                            </div>
                            <?php } ?>
                        </center>
                    </div>
                </ul>
            </div>
        </nav>
        </div>
         <div class="wrapper wrapper-content" style="padding: 0;">
            <div class="row">

            <div class="col-lg-9">
                    <div class="ibox float-e-margins" >
                        <div class="ibox-content" style="padding: 0;">
                           <div id="mapcanvas">
                            </div>
                        </div>
                    </div>
            </div>
            <div class="col-lg-3">
                    <div class="ibox float-e-margins">
                       <div class="ibox-title" style="padding-top: 8px;">
                            <div class="row">
                                <div class="col-sm-6">
                                    <h3 style="color: white;"><b>All Device Map</b></h3>
                                </div>
                                <div class="col-sm-6">
                                    <div class="ibox-tools">
                                        <a href="<?=site_url('Tracking/view_map_table')?>"><button class="btn btn-sm btn-info">View Map Dashboard</button></a>
                                    </div>
                                </div>
                               
                            </div>
                        </div>
                        <div class="ibox-content" style="padding-top: 5px;">
                         <?php
                             $stop = 0; 
                             $running = 0; 
                             $gpsnotfixed = 0; 
                             $gpsfixed = 0; 
                         
                             for ($i=0; $i < count($res1); $i++) {
                                if ($res1[$i][0]['vehicle_movement_status'] == "B") {
                                  $running = $running+1; 
                                }else{
                                  $stop = $stop+1; 
                                }
                                if ($res1[$i][0]['gps_valid_data'] == "1") {
                                  $gpsfixed = $gpsfixed+1; 
                                } else {
                                  $gpsnotfixed = $gpsnotfixed+1; 
                                }
                            }   

                        ?>  

                             <!-- <table class="table table-hover table-bordered">
                              <thead>
                                <tr  style="color:#0073ea;">
                                   <th>Running</th>
                                    <th>Idle</th>
                                    <th>GPS Location</th>
                                    <th>CellId Location</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr>
                                   <td><?php print_r($running); ?></td>
                                   <td><?php print_r($stop); ?></td>
                                   <td><?php print_r($gpsfixed); ?></td>
                                   <td><?php print_r($gpsnotfixed); ?></td>
                                </tr>
                              </tbody>
                            </table> -->


                  <div style="background: linear-gradient(to bottom, #1488CC,#56CCF2);color: #fff;" id="count">
                    <table class="table" style="margin-bottom: 5px;">
                        <tbody>
                        <tr>
                            <td>
                                <button type="button" class="btn btn-danger m-r-sm"><?php print_r($running); ?></button>
                                Running
                            </td>
                            <td>
                                <button type="button" class="btn btn-primary m-r-sm" style="background-color: #1ab394;border-color: #1ab394;"><?php print_r($stop); ?></button>
                               Idle
                            </td>
                         </tr> 
                         <tr>    
                            <td>
                                <button type="button" class="btn btn-success m-r-sm"><?php print_r($gpsfixed); ?></button>
                                GPS Location
                            </td>
                            <td>
                                <button type="button" class="btn btn-info m-r-sm"><?php print_r($gpsnotfixed); ?></button>
                                CellId Location
                            </td>
                        </tr>
                       
                        </tbody>
                    </table>
                </div>

 
                     <div class="row" style="height: 350px;overflow-y: scroll;" id="device_table">
                        <div class="col-lg-10" style="padding: 0;">
                            <table class="table table-hover table-bordered" style="text-align: center;"> 
                                <thead>
                                  <tr style="color:#0073ea;">
                                      <th style="text-align: center;">Vehical</th>
                                      <th style="text-align: center;">Speed</th>
                                      <th style="text-align: center;">Status</th>
                                      <th style="text-align: center;">Panic</th>
                                  </tr>
                                </thead>
                                <tbody id="vehical_status">
                                <?php for ($i=0; $i < count($res1); $i++) { ?>
                                <tr  class="map_details">
                                   <td><a href="<?=site_url('Tracking/index/'.$res1[$i][0]['device_id'])?>" > <label class="control-label vehicle_no"><?=$res1[$i]['vehicle_no']?></label></a></td>
                                    <td class="text-navy" id="<?=$res1[$i][0]['device_id']?>"><a href="<?=site_url('Tracking/index/'.$res1[$i][0]['device_id'])?>" ><?=$res1[$i][0]['speed']?></a></td>
                                    <?php if ($res1[$i][0]['vehicle_movement_status'] == "B") { ?>
                                          <td><a href="<?=site_url('Tracking/index/'.$res1[$i][0]['device_id'])?>" ><img src="<?=base_url()?>assets/img/icon-bus-green.png" alt="running" style="height:20px;"></a></td>
                                    <?php  }else { ?>
                                          <td><a href="<?=site_url('Tracking/index/'.$res1[$i][0]['device_id'])?>" ><img src="<?=base_url()?>assets/img/icon-bus-red.png" alt="stop" style="height:20px;"></a></td>
                                    <?php  } ?>
                                     <?php if ($res1[$i][0]['panic_status'] == "0") { ?>
                                          <td><a href="<?=site_url('Tracking/index/'.$res1[$i][0]['device_id'])?>" ><img src="<?=base_url()?>assets/img/green1.png" alt="" style="height:15px;"></a></td>
                                    <?php  }else { ?>
                                          <td><a href="<?=site_url('Tracking/index/'.$res1[$i][0]['device_id'])?>" ><img src="<?=base_url()?>assets/img/red_deep.png" alt="" style="height:15px;"></a></td>
                                    <?php  } ?>
                               </tr>
                                <?php } ?>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="col-lg-2" style="padding: 0;">
                            <table class="table table-hover table-bordered">
                                <thead>
                                  <tr style="color:#0073ea;">
                                     <th>View</th>
                                  </tr>
                                </thead>
                                <tbody>
                                <?php for ($i=0; $i < count($res1); $i++) { ?>
                                <tr class="view_map">
                                    <td><a href="<?=site_url('Tracking/index/'.$res1[$i][0]['device_id'])?>" ><label class="control-label">view</lable></a></td>
                                
                               </tr>
                                <?php } ?>
                                </tbody>
                            </table>
                        </div> 

                    </div>
                  </div>
                </div>
            </div>
            </div>

        </div>

       <div class="footer">
            <div class="pull-right">
                <i class="fa fa-phone-square" aria-hidden="true"></i><strong> 020-24269021 / 7030578612</strong> | <i class="fa fa-envelope" aria-hidden="true"></i> <strong>contact@syntech.co.in</strong> 
            </div>
            <div>
                <strong>Copyright </strong><a href="http://www.syntech.co.in" target="_blank"> <img src="<?=base_url()?>assets/img/syntech_logo.png" style="height:13px;"></a><strong> &copy; 2017-2018 </strong> 
            </div>
        </div>
        </div>
        </div>

<script>

</script>
  </body>
</html>